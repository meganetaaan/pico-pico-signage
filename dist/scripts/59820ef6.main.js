!function(a){function b(a,b,c){var d=null,e=t[a],f=u[a];throw f&&(d=f(a,e,b,c)),!d&&e&&(d=r.u.str.format.apply(null,[e].concat(b))),d&&(d+="(code="+a+")"),b=d?Error(d):Error("FwError: code = "+a),a&&(b.code=a),c&&(b.detail=c),b}function c(a,b,c){var d=null,e=t[a];return e&&(b=[e].concat(b),d=r.u.str.format.apply(null,b)),{code:a,message:d,detail:c}}function d(a){return null==a?a:z(a)?a:[a]}function e(a){var b=document.createElement("span");return b.innerHTML='<a href="'+a+'" />',b.firstChild.href}function f(a){return"string"==typeof a}function g(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function h(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function i(a){return f(a)?!!a.match(/^[A-Za-z_\$][\w|\$]*$/):!1}function j(b){if("regexp"===a.type(b))return b;var c="",c=-1!==b.indexOf("*")?a.map(b.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):b;return RegExp("^"+c+"$")}function k(a,b,c){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(b,c):a[b](c))}function l(b,c,d,e){return b[a.hasOwnProperty("curCSS")?"pipe":"then"](c,d,e)}function m(a){return a&&a.document&&a.document.nodeType===y&&o(a.document)===a}function n(a){return typeof a.nodeType===w?m(a)?a.document:null:a.nodeType===y?a:a.ownerDocument}function o(a){return window.document===a?window:a.defaultView||a.parentWindow}function p(a,b,c,d){function e(){!n&&++m===l&&b&&b()}function f(){n=!0,c?c.apply(this,arguments):d&&r.settings.commonFailHandler&&r.settings.commonFailHandler.call(this,arguments)}var g=a?a.length:0,h=r.async.isPromise;if(1===g){if(g=a[0],h(g))return g.done(b),void(c?g.fail(c):d&&r.settings.commonFailHandler&&g.fail(r.settings.commonFailHandler));g=0}if(0===g)b();else{for(var i=[],j=0,k=a.length;k>j;j++)g=a[j],h(g)&&i.push(g);var l=i.length;if(0===l)b&&b();else for(var m=0,n=!1,j=0;l>j;j++)i[j].done(e).fail(f)}}var q=void 0;if(window.h5){if(window.h5.env&&"1.1.14"===window.h5.env.version)return;q=window.h5}var r={};window.h5=r,r.coexist=function(){return window.h5=q,r},r.env={version:"1.1.14"};var s,t={},u={},v=12029,w="undefined",x=1,y=9,z=Array.isArray||function(){var a=Object.prototype.toString;return function(b){return"[object Array]"===a.call(b)}}(),A=function(){if("function"==typeof RegExp()){var a=Object.prototype.toString;return function(b){return"[object Function]"===a.call(b)}}return function(a){return"function"==typeof a}}(),B={controllerInternal:null};!function(){function g(a){switch(a){case"string":return"s";case"number":return"n";case"boolean":return"b";case"String":return"S";case"Number":return"N";case"Boolean":return"B";case"infinity":return"i";case"-infinity":return"I";case"nan":return"x";case"date":return"d";case"regexp":return"r";case"array":return"a";case"object":return"o";case"null":return"l";case t:return"u";case"undefElem":return"_";case"objElem":return"@"}}function h(a,b){if(f(a)){var c=a;return b&&(c=c.replace(/\\n/g,"\n").replace(/\\r/g,"\r")),c=c.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(h(a.toString())):a}function j(a,b){return"1"===b?a:f(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\-/g,"\\"):a instanceof String?new String(j(a.toString())):a}function m(a,b,c){var d=r.async.deferred();return r.ajax({url:a,async:b,cache:c,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=s(arguments);a.push(this.url),d.notifyWith(d,a),d.resolveWith(d,a)}).fail(function(){d.rejectWith(d,s(arguments))}),d.promise()}function n(a){f(a)||b(u,"h5.u.obj.ns()");for(var a=a.split("."),c=a.length,d=0;c>d;d++)i(a[d])||b(u,"h5.u.obj.ns()");for(var e=window,d=0;c>d;d++){var g=a[d];typeof e[g]===t&&(e[g]={}),e=e[g]}return e}function o(a,c){var d,e=n(a);for(d in c)c.hasOwnProperty(d)&&(void 0!==e[d]&&b(v,[a,d]),e[d]=c[d])}function q(b){return b&&b.jquery?b.jquery===a().jquery:!1}function s(a){return Array.prototype.slice.call(a)}var t="undefined",u=11e3,v=11001,w=11004,x=11005,y=11006,B={},C={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},D=void 0!==document.createElement("script").onload,E=-1===/\r\n/.toString().indexOf("\r\n");o("h5.u",{loadScript:function(g,h){var i=r.async.deferred,j=d(g);(!j||0===j.length)&&b(11007);for(var k=0,n=j.length;n>k;k++)g=j[k],(!f(g)||!a.trim(g))&&b(11007);null!=h&&!a.isPlainObject(h)&&b(11008,"h5.u.loadScript()");var o=h&&!1===h.async?!1:!0,q=!(!h||!0!==h.force),k=!(!h||!0!==h.parallel),t=!(!h||!0!==h.atomic),u=!q,v=o?i():null,w=o?function(a){v.reject(c(11010,[a]))}:null,n=o?function(){var a=i();return setTimeout(function(){a.resolve([])},0),a.promise()}:null,x=k?[]:null,y=[],z={};if(o){if(!t&&D){var A=a("head"),C=function(a){var b=i(),c=document.createElement("script");return c.onload=function(){c.onload=null,B[a]=a,b.resolve()},c.onerror=function(){c.onerror=null,b.reject(a)},c.type="text/javascript",c.src=u?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date,A[0].appendChild(c),b.promise()};if(k)x.push(n()),a.each(j,function(){var a=e(this);return!q&&a in B?!0:void x.push(C(a))}),p(x,function(){v.resolve()},w);else{var E=l(i().resolve(),n);a.each(j,function(){var a=e(this);E=l(E,function(){return!q&&a in B?void 0:C(a)},w)}),l(E,function(){v.resolve()},w)}}else if(k){var F=[];x.push(n()),F.push(null),a.each(j,function(){var a=e(this);return!q&&(a in B||a in z)?!0:(x.push(m(a,o,u)),void(t?z[a]=a:F.push(null)))}),k=j=null,t?(j=function(){a.each(s(arguments),function(b,c){a.globalEval(c[0])}),a.extend(B,z),v.resolve()},k=a.noop):(j=function(){v.resolve()},k=function(){for(var b=s(arguments),c=0;c<F.length;c++)if(b[c]){var d=b[c][3];F[c]!==d&&(a.globalEval(b[c][0]),F.splice(c,1,d))}}),r.async.when(x).done(j).fail(w).progress(k)}else E=l(i().resolve(),n),a.each(j,function(){var b=e(this);E=l(E,function(){var c=i();return!q&&(b in B||b in z)?c.resolve():m(b,o,u).done(function(d){t?(y.push(d),z[b]=b):(a.globalEval(d),B[b]=b),c.resolve()}).fail(function(){c.reject(this.url)}),c.promise()},w)}),l(E,function(){t&&(a.each(y,function(b,c){a.globalEval(c)}),a.extend(B,z)),v.resolve()},w);return v.promise()}a.each(j,function(){var c=e(this);return!q&&(c in B||c in z)?!0:void m(c,o,u).done(function(b){t?(y.push(b),z[c]=c):(a.globalEval(b),B[c]=c)}).fail(function(){b(11010,[c])})}),t&&(a.each(y,function(b,c){a.globalEval(c)}),a.extend(B,z))},createInterceptor:function(a,b){return function(c){var d={},e=a?a.call(this,c,d):c.proceed();if(c.result=e,!b)return e;if(e&&A(e.promise)&&!q(e)){var f=this;return k(e,"always",function(){b.call(f,c,d)}),e}return b.call(this,c,d),e}}}),o("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.lastIndexOf(b)===c},format:function(a,b){if(null==a)return"";var c=arguments;return a.replace(/\{(\d+)\}/g,function(a,b){var d=c[parseInt(b,10)+1];return typeof d===t?t:d})},escapeHtml:function(b){return"string"!==a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return C[a]})}}),o("h5.u.obj",{expose:o,ns:n,serialize:function(c){function d(a){for(var b=0,c=i.length;c>b;b++)if(a===i[b])return!0;return!1}function e(a){for(var b=0,c=i.length;c>b;b++)a===i[b]&&i.splice(b,1)}function f(c){var j=c,k=a.type(c);switch("object"==typeof c&&(c instanceof String?k="String":c instanceof Number?k="Number":c instanceof Boolean&&(k="Boolean")),k){case"String":case"string":j=g(k)+h(j);break;case"Boolean":j=j.valueOf();case"boolean":j=g(k)+(j?1:0);break;case"Number":j=j.valueOf(),(a.isNaN&&a.isNaN(c)||a.isNumeric&&!a.isNumeric(c))&&(j=g(1/0===c.valueOf()?"infinity":-(1/0)===c.valueOf()?"-infinity":"nan")),j=g(k)+j;break;case"number":j=a.isNaN&&a.isNaN(c)||a.isNumeric&&!a.isNumeric(c)?g(1/0===c?"infinity":-(1/0)===c?"-infinity":"nan"):g(k)+j;break;case"regexp":j=g(k)+h(j.toString(),E);break;case"date":j=g(k)+ +j;break;case"array":d(c)&&b(ERR_CODE_REFERENCE_CYCLE),i.push(c);for(var l=[],j=g(k)+"[",k=0,m=c.length;m>k;k++){l[k.toString()]=!0;var n;n=c.hasOwnProperty(k)?"function"===a.type(c[k])?g(t):f(c[k]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):g("undefElem"),j+='"'+n+'"',k!==c.length-1&&(j+=",")}var o,k="";for(o in c)l[o]||"function"!==a.type(c[o])&&(k+='"'+h(o)+'":"'+f(c[o]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');k&&(j+=(c.length?",":"")+'"'+g("objElem")+"{"+k.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),j=j.replace(/,$/,""),j+='}"'),j+="]",e(c);break;case"object":d(c)&&b(x),i.push(c),j=g(k)+"{";for(o in c)c.hasOwnProperty(o)&&"function"!==a.type(c[o])&&(j+='"'+o+'":"'+f(c[o]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');j=j.replace(/,$/,""),j+="}",e(c);break;case"null":case t:j=g(k)}return j}A(c)&&b(11002);var i=[];return"2|"+f(c)},deserialize:function(c){function d(c){function f(a){switch(a){case"s":return"string";case"n":return"number";case"b":return"boolean";case"S":return"String";case"N":return"Number";case"B":return"Boolean";case"i":return"infinity";case"I":return"-infinity";case"x":return"nan";case"d":return"date";case"r":return"regexp";case"a":return"array";case"o":return"object";case"l":return"null";case"u":return t;case"_":return"undefElem";case"@":return"objElem"}}if(c.match(/^(.)(.*)/),c=RegExp.$1,h=RegExp.$2?RegExp.$2:"",void 0!==c&&""!==c)switch(f(c)){case"String":h=new String(j(h,e));break;case"string":break;case"Boolean":"0"===h||"1"===h?h=new Boolean("1"===h):b(y);break;case"boolean":"0"===h||"1"===h?h="1"===h:b(y);break;case"nan":""!==h&&b(y),h=NaN;break;case"infinity":""!==h&&b(y),h=1/0;break;case"-infinity":""!==h&&b(y),h=-(1/0);break;case"Number":"infinity"===f(h)?h=new Number(1/0):"-infinity"===f(h)?h=new Number(-(1/0)):"nan"===f(h)?h=new Number(NaN):(h=new Number(h),isNaN(h.valueOf())&&b(y));break;case"number":h=new Number(h).valueOf(),isNaN(h)&&b(y);break;case"array":var i;try{i=a.parseJSON(h)}catch(k){b(y)}z(i)||b(y);for(var l=0;l<i.length;l++)switch(f(i[l].substring(0,1))){case"undefElem":delete i[l];break;case"objElem":for(var m=d(g("object")+i[l].substring(1)),c=[],l=0,n=i.length-1;n>l;l++)c[l]=i[l];i=c;for(var o in m)i[o]=m[o];break;default:i[l]=d(i[l])}h=i;break;case"object":try{i=a.parseJSON(h)}catch(p){b(y)}a.isPlainObject(i)||b(y);for(o in i)i[o]=d(i[o]);h=i;break;case"date":h=new Date(parseInt(h,10));break;case"regexp":try{l=h.match(/^\/(.*)\/(.*)$/),m=j(l[1],e),h=RegExp(m,l[2])}catch(q){b(y)}break;case"null":""!==h&&b(y),h=null;break;case t:""!==h&&b(y),h=void 0;break;default:b(w)}return j(h,e)}f(c)||b(11009),c.match(/^(.)\|(.*)/);var e=RegExp.$1;"1"!==e&&"2"!==e&&b(11003,[e,"2"]);var h=RegExp.$2;return d(h)},isJQueryObject:q,argsToArray:s,getByPath:function(a,c){f(a)||b(u,"h5.u.obj.getByPath()");var d=a.split("."),e=0;"window"!==d[0]||c&&c!==window||(e=1);for(var g=c||window,h=d.length;h>e&&(g=g[d[e]],!(null==g));e++);return g}})}(),function(){function c(a,b){if(a.target||(a.target=b),a.timeStamp||(a.timeStamp=(new Date).getTime()),!a.isDefaultPrevented){var c=!1;a.isDefaultPrevented=function(){return c},a.preventDefault=function(){c=!0}}if(!a.isImmediatePropagationStopped){var d=!1;a.isImmediatePropagationStopped=function(){return d},a.stopImmediatePropagation=function(){d=!0}}}function d(a){var b,c={};for(b in a){var d=a[b];a.hasOwnProperty(b)&&(A(d)||null===d||"string"==typeof d||"number"==typeof d||"boolean"==typeof d)&&(c[b]=d)}this._mix=function(a){for(var b in c)a[b]=c[b]},this._hasInterface=function(a){for(var b in c)if(!r.u.str.startsWith(b,"_")&&typeof a[b]===w)return!1;return!0}}function e(a){return new d(a)}a.extend(d.prototype,{mix:function(a){return this._mix(a)},hasInterface:function(a){return this._hasInterface(a)}}),r.u.obj.expose("h5.mixin",{createMixin:e,eventDispatcher:e({hasEventListener:function(a,b){if(!this._eventListeners)return!1;var c=this._eventListeners[a];if(!c||!this._eventListeners.hasOwnProperty(a))return!1;for(var d=0,e=c.length;e>d;d++)if(c[d]===b)return!0;return!1},addEventListener:function(a,c){(2>arguments.length||!f(a))&&b(16e3),null==c||this.hasEventListener(a,c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||(this._eventListeners[a]=[]),this._eventListeners[a].push(c))},removeEventListener:function(a,b){if(this.hasEventListener(a,b))for(var c=this._eventListeners[a],d=0,e=c.length;e>d;d++)if(c[d]===b){c.splice(d,1);break}},dispatchEvent:function(a){if(this._eventListeners){var b=this._eventListeners[a.type];if(b){b=b.slice(0),c(a,this);for(var d=0,e=b.length;e>d&&!a.isImmediatePropagationStopped();d++)A(b[d])?b[d].call(a.target,a):b[d].handleEvent&&b[d].handleEvent(a);return a.isDefaultPrevented()}}}})})}(),function(){function c(a){return a.match(/^error$/i)?l:a.match(/^warn$/i)?m:a.match(/^info$/i)?n:a.match(/^debug$/i)?o:a.match(/^trace$/i)?p:a.match(/^all$/i)?q:a.match(/^none$/i)?s:null}function e(a,b){var c={},d=a.slice(0,b),e=Math.min(B,b),f=d.slice(0,e).join(" <- ");return d.length>e&&(f+=" ..."),c.preview=f,c.all=d.join("\n"),c}function g(a){var b="";return a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1),b}function h(b){for(var b=r.u.obj.argsToArray(b),c=[],d=0,e=b.length;e>d;d++)c.push(a.type(b[d]));return c.join(", ")}function i(){}function k(c){(!f(c)||0===a.trim(c).length)&&b(w),this.category=a.trim(c)}var l,m,n,o,p,q,s,t=10002,u=10003,v=10004,w=10005,x=10007,y=10008,A=10010,B=3;l=50,m=40,n=30,o=20,p=10,q=0,s=-1;var C=null;i.prototype={init:function(){},log:function(a){window.console&&(f(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,c=null,c=1===b.length?b[0]:r.u.str.format.apply(r.u.str,b),b=this._getLogPrefix(a)+c;a.logger.enableStackTrace&&(b+="  ["+a.stackTrace.preview+"]"),a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b),a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all),a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var c=!1;a==l&&console.error?(console.error(b),c=!0):a==m&&console.warn?(console.warn(b),c=!0):a==n&&console.info?(console.info(b),c=!0):a==o&&console.debug&&(console.debug(b),c=!0),!c&&console.log&&console.log(b)},_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,c=this._getLogPrefix(a);b.unshift(c),a.level==l&&console.error?this._output(console.error,b):a.level==m&&console.warn?this._output(console.warn,b):a.level==n&&console.info?this._output(console.info,b):a.level==o&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply)return void a.apply(console,b)}catch(c){}a(b)}},k.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(l,arguments,this.error)},warn:function(a){this._log(m,arguments,this.warn)},info:function(a){this._log(n,arguments,this.info)},debug:function(a){this._log(o,arguments,this.debug)},trace:function(a){this._log(p,arguments,this.trace)},_traceFunctionName:function(b){var c=Error(),d=c.stack||c.stacktrace,c=[];if(d)var c=d.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/gi,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),f=null,c=a.map(c,function(b){return f=0===b.length?null:""===a.trim(b)?"{anonymous}":a.trim(b)}).slice(3);else for(var d=0,i=this.maxStackSize;i>d;d++){var j,k=g(b),l=h(b.arguments);try{j=b.caller}catch(m){c.push("{unable to trace}");break}if(!k){if(j){c.push("{anonymous}("+l+")");break}c.push("{root}("+l+")")}c.push("{"+k+"}("+l+")"),b=j}return e(c,this.maxStackSize)},_log:function(a,b,c){var b={level:a,args:r.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(c):""},e=C.out,f=C.defaultOut,c=null;if(e)for(var e=d(e),g=0,h=e.length;h>g;g++){var i=e[g];if(i.compiledCategory.test(this.category)){c=i;break}}if(c||(c=f),g=c.compiledLevel,c=c.compiledTargets,!(g>a||0>g)&&(b.logger=this,b.date=new Date,b.levelString=this._levelToString(a),c&&0!==c.length))for(g=0,h=c.length;h>g;g++)c[g].log(b)},_levelToString:function(a){return a===l?"ERROR":a===m?"WARN":a===n?"INFO":a===o?"DEBUG":a===p?"TRACE":void 0}},r.u.obj.expose("h5.log",{createLogger:function(a){return new k(a)},configure:function(){function e(e,i,k){var l=null==k;if(!l){var m=i.category;(!f(m)||0===a.trim(m).length)&&b(A),m=a.trim(m),-1!==a.inArray(m,h)&&b(t,i.category),i.compiledCategory=j(m),h.push(m)}m=null==i.level?c(l?g.level:k.level):f(i.level)?c(a.trim(i.level)):i.level,"number"!=typeof m&&b(u,i.level),i.compiledLevel=m;var m=[],n=i.targets;if(!l||null!=n){var o=[];null==n||z(n)||f(n)&&a.trim(n).length||b(y);for(var n=d(n),p=0,q=n.length;q>p;p++){null==n[p]||f(n[p])&&a.trim(n[p]).length||b(y);var r=n[p];if(r){-1!==a.inArray(r,o)&&b(x,r);var s=e[r];s||b(v,r),o.push(r),m.push(s.compiledTarget)}}if(!l&&(e=k.targets,null!=e))for(e=d(e),p=0,q=e.length;q>p;p++)r=e[p],-1===a.inArray(r,o)&&(m.push(k.compiledTargets[p]),o.push(r))}i.compiledTargets=m}var g={level:"NONE",targets:null},h=[],k=a.extend(!0,{},r.settings.log?r.settings.log:{defaultOut:g}),l=k.target;l||(l={},k.target=l),function(c){a.isPlainObject(c)||b(10009);for(var d in c){var e=c[d];"object"!==a.type(e.type)&&"console"!==e.type&&b(1e4);var f=null,f="console"===e.type?new i:a.extend(!0,{},e.type);f.init&&f.init(e),e.compiledTarget=f}c.console={type:"console",compiledTarget:new i}}(l);var m=k.defaultOut;m||(m=g,k.defaultOut=m),e(l,m);var n=k.out;if(n)for(var n=d(n),o=0,p=n.length;p>o;o++)e(l,n[o],m);C=k}})}(),function(){function b(b){r.settings.aspects=a.map(d(b),function(a){return a.target&&(a.compiledTarget=j(a.target)),a.pointCut&&(a.compiledPointCut=j(a.pointCut)),a})}r.u.obj.ns("h5.settings"),r.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){return a=a.status,"POST"===this.type||0!==a&&a!==v?!1:void 0}},trackstartTouchAction:"none"};var c=r.u.createInterceptor(function(a,b){return this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName),this.log.info(a.args),b.start=new Date,a.proceed()},function(a,b){var c=(new Date).getTime()-b.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,c)});r.u.obj.expose("h5.core.interceptor",{lapInterceptor:c,logInterceptor:c,errorInterceptor:function(a){var b=null;try{b=a.proceed()}catch(c){r.settings.commonFailHandler&&A(r.settings.commonFailHandler)&&r.settings.commonFailHandler.call(null,c)}return b}}),a(document).trigger("h5preinit"),r.settings.aspects&&b(r.settings.aspects),r.log.configure()}(),function(){r.u.obj.expose("h5.env",{ua:function(b){function c(a,b){var c=x(a,"[^;)]*",b).split(" ");return 1===c.length?"":c[c.length-1]}function d(a,b){var c=x(a,"[^;) ]*",b).split("/");return 1===c.length?"":c[c.length-1]}function e(a,b){var c=x(a,"[^;) ]*",b).split(":");return 1===c.length?"":c[c.length-1]}var f=!!b.match(/iPhone/i),g=!!b.match(/iPad/i),h=f||g,i=!!b.match(/android/i),j=!!b.match(/Windows Phone/i),k=!!b.match(/MSIE/)||!!b.match(/Trident/),l=!!b.match(/Firefox/i),m=!!b.match(/Chrome/i)||!!b.match(/CrMo/)||!!b.match(/CriOS/),n=!i&&!!b.match(/Safari/i)&&!m,o=!!b.match(/Webkit/i),p=!!b.match(/Opera/i),q=i&&!!b.match(/Safari/i)&&!m,r=!(!f&&!j&&!(q&&b.match(/Mobile/)&&!b.match(/SC-01C/)||i&&m&&b.match(/Mobile/)||b.match(/Fennec/i)||b.match(/Opera Mobi/i))),s=!(!g&&!(q&&!b.match(/Mobile/)||i&&m&&!b.match(/Mobile/)||b.match(/SC-01C/)||b.match(/Fennec/i)||b.match(/Opera Tablet/i))),t=!r&&!s,u=null,v=null,w=function(c,d){return a.trim(b.substring(b.indexOf(c)+c.length,b.indexOf(d))).split("_")},x=function(c,d,e){return a.trim(b.match(!1===e?RegExp(c+d):RegExp(c+d,"i")))};f?(v=w("iPhone OS","like"),u=parseInt(v[0]),v=v.join(".")):g?(v=w("CPU OS","like"),u=parseInt(v[0]),v=v.join(".")):i&&l||(i?(v=c("Android"),u=parseInt(v.split(".")[0])):j&&((v=c("Windows Phone OS"))||(v=c("Windows Phone")),u=parseInt(v.split(".")[0]))),k&&p&&(k=!1);var y=w=null;if(h||i&&q)w=u,y=v;else{var z=null;k?z=c("MSIE",!1)||e("rv"):m?(z=d("Chrome",!1))||(z=d("CrMo",!1)):n?z=d("Version"):l?z=d("Firefox"):p&&((z=d("Version"))||(z=d("Opera")),z||(z=c("Opera"))),z&&(w=parseInt(z.split(".")[0]),y=z)}return{osVersion:u,osVersionFull:v,browserVersion:w,browserVersionFull:y,isiPhone:f,isiPad:g,isiOS:h,isAndroid:i,isWindowsPhone:j,isIE:k,isFirefox:l,isChrome:m,isSafari:n,isOpera:p,isAndroidDefaultBrowser:q,isSmartPhone:r,isTablet:s,isDesktop:t,isWebkit:o}}(navigator.userAgent)})}(),function(){function c(a){function b(){if(c=!0,e=this,f=l(arguments),g(a)||h(a))return a;var b=l(arguments);if(0<i.length)for(var j=0,k=i.length;k>j;j++){var m=b;m!==arguments&&(m=d(m)),A(i[j])&&i[j].apply(this,m)}return a}var c=!1,e=null,f=null,i=[];a.progress=function(){for(var b=l(arguments),g=0,h=b.length;h>g;g++){var j=b[g];if(z(j))a.progress.apply(this,j);else if(A(j))if(c){var k=f;k!==f&&(k=d(k)),j.apply(e,k)}else i.push(j)}return this},a.notify=b,a.notifyWith=function(a,c){return c?b.apply(a,c):b.apply(a)}}function e(a){if(!a)return!1;for(var a=d(a),b=0,c=a.length;c>b;b++)if(A(a[b]))return!0;return!1}function f(b,g){function h(a){g?g[a]&&(b[a]=g[a]):(t[a]=b[a],b[a]=function(){return function(){if(!q){var c=l(arguments);("then"===a||"pipe"===a)&&(c=c[1]),e(c)&&(q=!0)}return b._h5UnwrappedCall.call(this,a,l(arguments))}}(a),u[a]=b[a])}function n(a){return function(){var c=r.settings.commonFailHandler;return!q&&c&&!s&&(b.fail.call(this,c),s=!0),a.apply(this,arguments)}}if(b._h5UnwrappedCall)return b;var p=!!b.progress;p||o(b)?g&&(b.progress=g.progress):c(b);var q=!1,s=!1,t={},u={};b._h5UnwrappedCall=g?g._h5UnwrappedCall:function(c,e){e=d(e),a.extend(b,t);var f=b[c].apply(this,e);return a.extend(b,u),f};for(var v=0,w=i.length;w>v;v++){var x=i[v];b[x]&&h(x)}if(b.pipe&&!g&&(b.pipe=function(){for(var a=r.async.deferred(),b=l(arguments),c=0,d=j.length;d>c;c++){var e=this;!function(b,c,d){function g(){if(h){var c=b.apply(this,arguments);c&&A(c.promise)?(f(c),c.done(a.resolve),c._h5UnwrappedCall("fail",a.reject),A(c.progress)&&c.progress(a.notify)):a[d+"With"](this,[c])}else a[d+"With"](this,arguments)}var h=A(b);h||"fail"!==c?e[c](g):e._h5UnwrappedCall(c,g)}(b[c],j[c],k[c])}return a.promise()},u.pipe=b.pipe),b.then&&!g){var y=b.then;b.then=m?b.pipe:function(){var a=arguments,c=y.apply(this,a);return!p&&e(a[2])&&b.progress.call(b,a[2]),c},u.then=b.then}if(b.reject&&(b.reject=g&&g.reject?g.reject:n(b.reject)),b.rejectWith&&(b.rejectWith=g&&g.rejectWith?g.rejectWith:n(b.rejectWith)),b.promise)if(g&&g.promise)b.promise=g.promise;else{var z=b.promise;b.promise=function(){return f(z.apply(this,arguments),b)}}return b}var i=["fail","always","pipe","then"],j=["done","fail","progress"],k=["resolve","reject","notify"],l=r.u.obj.argsToArray,m=function(){var b=a.Deferred();return b!==b.then()}(),n=function(){var b=a.Deferred();return f(b)},o=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};r.u.obj.expose("h5.async",{deferred:n,when:function(){var b=l(arguments);1===b.length&&z(b[0])&&(b=b[0]);var c=b.length,d=r.async.deferred(),e=d.promise(),f=a.when.apply(a,b).done(function(){d.resolveWith(this&&this.promise&&this.promise()===f?d:this,l(arguments))}).fail(function(){d.rejectWith(this,l(arguments))});if(f.progress)f.progress(function(){d.notifyWith(this===f?e:this,l(arguments))});else{for(var g=[],h=0;c>h;h++)g[h]=void 0;for(var i=function(a){return function(b){g[a]=1<arguments.length?l(arguments):b,d.notifyWith(e,g)}},h=0;c>h;h++){var j=b[h];j&&A(j.promise)&&j.progress&&(c>1?j.progress(i(h)):j.progress(function(){d.notifyWith(e,l(arguments))}))}}return e},isPromise:o,loop:function(c,d,e){z(c)||b(5e3);var f,g=n(),h="number"===a.type(e)?e:20,i=0,j=c.length,k=null,l=function(){if(i===j)g.resolve(c);else{var a=d.call(c,i,c[i],k);i++,o(a)?a.done(function(){f()}).fail(function(){g.reject(c)}):f()}},m=function(){setTimeout(function(){var a=i-1;i>0&&g.notify({data:c,index:a,value:c[a]}),l()},0)},p=!1;f=function(){p||(0===i%h?m():l())};var q=!1,k={resume:function(){!q&&p&&(p=!1,f())},pause:function(){p=!0},stop:function(){q=!0,g.resolve(c)}};return m(),g.promise()}})}(),function(){function b(a,b){for(var c=0,d=g.length;d>c;c++){var e=g[c];a[e]&&(b[h[e]](a[e]),a[e]=void 0)}}function c(b,c,d){for(var f in c)!c.hasOwnProperty(f)||!d&&A(c[f])||-1!==a.inArray(f,e)||(b[f]=c[f])}function d(a,b){c(this,a,!0),b.promise(this);var d=this.always;this.always=function(){return d.apply(this,arguments),this}}var e=["error","success","complete"],g=["error","success","complete"],h={success:"done",error:"fail",complete:"always"};r.u.obj.expose("h5",{ajax:function(){function e(a,b,d){c(k,d),j.resolveWith(this,arguments)}function g(b,d,f){if(0===h.retryCount||!1===h.retryFilter.apply(this,arguments))c(k,b),j.rejectWith(this,arguments);else if(h.retryCount--,this.async){var i=this;setTimeout(function(){a.ajax(i).done(e).fail(g)},h.retryInterval)}else a.ajax(this).done(e).fail(g)}var h={},i=arguments;f(i[0])?(a.extend(h,i[1]),h.url=i[0]):a.extend(h,i[0]);var h=a.extend({},r.settings.ajax,h),j=r.async.deferred();b(h,j);var i=a.ajax(h),k=new d(i,j);return i.done(e).fail(g),k}})}(),function(){function e(a,c,d,e,f){for(var g in d)g in rb&&b(Va,[f,g],{controllerDefObj:d})}function i(c,d){function e(f,g){-1!==a.inArray(f,g)&&b(Ta,[d],{controllerDefObj:c}),C(f,function(a){e(a,g.concat([f]))},!0)}e(c,[])}function j(c){function d(e,f){-1!==a.inArray(e,f)&&b(Ua,[c.__name],{logicDefObj:c}),D(e,function(a){d(a,f.concat(e))})}d(c,[])}function k(c,d,e){null==c&&b(Na,[e],{controllerDefObj:d}),!f(c)&&"object"!=typeof c&&b(_a,[e],{controllerDefObj:d}),c=a(c),0===c.length&&b(Oa,[e],{controllerDefObj:d}),1<c.length&&b(Pa,[e],{controllerDefObj:d}),c[0].nodeType!==y&&c[0].nodeType!==x&&b(bb,[e],{controllerDefObj:d})}function l(a,b,c,d,e){this.controller=a,this.event=b,this.evArg=c,this.selector=d,this.selectorType=e}function q(a){return fa(this)||!this.__controllerContext.executeListeners?void 0:a.proceed()}function s(a,b,c){var e;e=a.__name;var f=[],g=r.settings.aspects;if(g&&0!==g.length)for(var g=d(g),h=g.length-1;h>-1;h--){var i=g[h];if(!i.target||i.compiledTarget.test(e)){var j=i.interceptors;if(!i.pointCut||i.compiledPointCut.test(b))if(z(j))for(i=j.length-1;i>-1;i--)f=f.concat(j[i]);else f.push(j)}}return e=f,c&&e.push(q),t(a[b],b,e)}function t(a,b,c){for(var d=function(a,b,c){return function(){var d=this;return c.call(d,{target:d,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(d,this.args)}})}},e=0,f=c.length;f>e;e++)a=d(a,b,c[e]);return a}function u(a,b,c){if(c&&a===Ia)return c.rootElement;for(var d=["window","document","navigator"],e=0,f=d.length;f>e;e++){var g=d[e];if(a===g||ib(a,g+"."))return r.u.obj.getByPath(a,o(b))}return c&&ib(a,"this.")?r.u.obj.getByPath(a.slice(5),c):a}function C(a,b,c){var d=c?Ba.get(a.__name):a.__controllerContext&&a.__controllerContext.cache;if(d)for(var c=0,e=d.childControllerProperties.length;e>c;c++){var f=d.childControllerProperties[c];if(!1===b(a[f],a,f))return!1}else for(f in a){var d=a,e=f,g=c,h=d[e];if(jb(e,Da)&&"rootController"!==e&&"parentController"!==e&&h&&(g||h.__controllerContext&&!h.__controllerContext.isRoot&&(!h.parentController||h.parentController===d))&&!1===b(a[f],a,f))return!1}}function D(a,b){var c=Ba.get(a.__name);if(c)for(var d=0,e=c.logicProperties.length;e>d;d++){var f=c.logicProperties[d];if(!1===b(a[f],a,f))return!1}else for(f in a)if(a.hasOwnProperty(f)&&jb(f,Ea)&&!1===b(a[f],a,f))return!1}function E(a,b,c,d){function e(a,c,d){return!1===E(a,b,c,d)?!1:void 0}return!1===b.call(this,a,c,d)?!1:C(a,e)}function F(a,b,c,d){return!1===C(a,function(a,c,d){return!1===F(a,b,c,d)?!1:void 0})||!1===b.call(this,a,c,d)?!1:void 0}function G(a,b){var c=[];return C(a,function(a){(a=a[b])&&c.push(a)}),c}function H(b,c,d){function e(b){var c=b.handler,d=b.controller;b.originalHandler=c,b.handler=function(){var e=b.isNativeBind||1!==r.settings.listenerElementType?this:a(this);c.call(d,W(b,arguments),e)}}var f=c.selector,g=c.eventName;switch(g){case"mousewheel":d=S(b,f,g,d);break;case Fa:case Ga:case Ha:d=T(b,f,g,d);break;default:d=R(b,f,g,d)}for(z(d)||(d=[d]),f=0,g=d.length;g>f;f++){var h=d[f];e(h),h.isBindRequested=c.isBindRequested,h.isGlobal=c.isGlobal,h.bindTarget=c.bindTarget,h.controller=b}return d}function I(b,c){var d=b.controller,e=d.rootElement,g=b.selector,h=b.eventName,i=b.handler,j=b.isBindRequested,k=b.isGlobal;b.bindTarget?(b.evSelectorType=Ca.SELECTOR_TYPE_OBJECT,ta(b)):k?(d=u(g,c,d),j||!f(d)?(b.evSelectorType=Ca.SELECTOR_TYPE_OBJECT,b.bindTarget=f(d)?a(d):d,ta(b)):(b.evSelectorType=Ca.SELECTOR_TYPE_GLOBAL,a(c).delegate(d,h,i)),b.evSelector=d):(b.evSelectorType=Ca.SELECTOR_TYPE_LOCAL,b.evSelector=g,j?(b.bindTarget=a(g,e),ta(b)):a(e).delegate(g,h,i)),b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),qb&&h===Fa&&null!=r.settings.trackstartTouchAction&&(k?a(b.evSelector,c):a(b.evSelector,e)).each(function(){this.style[pb]=r.settings.trackstartTouchAction}))}function J(b,c,d){var e=b.controller,f=e.rootElement,g=b.selector,h=b.handler,i=b.eventName,j=b.isGlobal;if(b.bindTarget)c=b.bindTarget,f=b.eventName,g=b.handler,b.isNativeBind?c.removeEventListener(f,g):a(c).unbind(f,g);else if(j){if(null==o(c))return;a(c).undelegate(g,i,h)}else a(f).undelegate(g,i,h);d||(d=e.__controllerContext.boundHandlers,d.splice(a.inArray(b,d),1))}function K(a,b){E(a,function(a){a.__controllerContext.executeListeners=b})}function L(a,b,d){return function(){var e=null,f=a.__name;if(a[b])try{e=a[b]({args:a.__controllerContext.args})}catch(g){ca(a,g)}e&&A(e.done)&&A(e.fail)?e.done(d).fail(function(){var b=c(ab,f,lb(arguments));ca(a.rootController,null,b)}):d()}}function M(a,b){E(a,function(a){if(!fa(a)&&!a.__controllerContext.isDisposing){var c,d;"__init"===b?(c=N(a),d=[a.preInitPromise],a.parentController&&d.push(a.parentController.initPromise)):"__postInit"===b?(c=O(a),d=G(a,"postInitPromise")):(c=P(a),d=G(a,"readyPromise")),p(d,L(a,b,c))}})}function N(a){return function(){if(!ga(a)){a.isInit=!0;var b=a.__controllerContext.initDfd;delete a.__controllerContext.templatePromise,delete a.__controllerContext.preInitDfd,delete a.__controllerContext.initDfd;var c=a.rootElement,d=[];try{var e=a.__meta;C(a,function(b,f,g){d.push(b),f=e&&e[g]&&e[g].rootElement?Y(e[g].rootElement,b,a):c,k(f,b.__controllerContext.controllerDef,b.__name),b.rootElement=f,b.view.__controller=b})}catch(f){return void ca(a,f)}b.resolveWith(a),ga(a)||!d.length&&function(){var b=!0;return E(a.rootController,function(a){return b=a.isInit}),b}()&&M(a.rootController,"__postInit")}}}function O(a){return function(){if(!ga(a)){a.isPostInit=!0;var b=a.__controllerContext.postInitDfd;delete a.__controllerContext.postInitDfd,b.resolveWith(a),!ga(a)&&a.__controllerContext.isRoot&&(E(a,function(a,b,c){var d=!0;if(b&&b.__meta&&b.__meta[c]&&(d=!1!==b.__meta[c].useHandlers),d){var e,b=a.__controllerContext.cache.bindMap,c=n(a.rootElement);for(e in b)for(var d=H(a,b[e],a[e]),f=0,g=d.length;g>f;f++)I(d[f],c)}}),Z(a))}}}function P(b){return function(){if(!ga(b)){b.isReady=!0;var c=b.__controllerContext.readyDfd;delete b.__controllerContext.readyDfd,c.resolveWith(b),ga(b)||b.__controllerContext.isRoot&&b.rootElement&&b.isInit&&b.isPostInit&&b.isReady&&a(b.rootElement).trigger("h5controllerready",b)}}}function Q(b,c){if(!f(b))return a(b);var d=a.trim(b);return Ka.test(d)?(d=a.trim(d.substring(1,d.length-1)),a(u(d,n(c.rootElement),c))):a(c.rootElement).find(b)}function R(a,b,c,d){return{controller:a,selector:b,eventName:c,handler:d}}function S(a,b,c,d){return{controller:a,selector:b,eventName:typeof document.onmousewheel===w?"DOMMouseScroll":c,handler:function(b){var c=b.event;null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.wheelDelta&&(c.wheelDelta=c.originalEvent.wheelDelta),null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.detail&&(c.wheelDelta=40*-c.originalEvent.detail),d.call(a,b)}}}function T(b,c,d,e){
function f(a,b){for(var c in a)a.hasOwnProperty(c)&&!b[c]&&"target"!==c&&"currentTarget"!==c&&"originalEvent"!==c&&"liveFired"!==c&&(b[c]=a[c]);b.h5DelegatingEvent=a}var g=typeof document.ontouchstart!==w;if(d!==Fa)return R(b,c,d,function(b){var c=b.event.h5DelegatingEvent.type;if("mousemove"===c||"mouseup"===c){var c=b.event,d=a(c.currentTarget).offset()||{left:0,top:0};c.offsetX=c.pageX-d.left,c.offsetY=c.pageY-d.top}e.apply(this,arguments)});var h=a(n(b.rootElement));return function(){function i(c,d,e){return function(g){var j;a:{switch(c){case"touchstart":case"mousedown":j=Fa;break a;case"touchmove":case"mousemove":j=Ga;break a;case"touchend":case"mouseup":j=Ha;break a}j=void 0}var m=j===Fa;if(!m||!l){var n=0===g.event.type.indexOf("touch");n&&U(g.event,c);var o=new a.Event(j);f(g.event,o);var p=g.event.target;d&&(p=d),e&&e(o);var q=g.event.originalEvent||g.event;m&&-1===a.inArray(q,nb)&&(nb=[],ob=[]);var r=a.inArray(q,nb);if(-1===r&&(r=nb.push(q)-1,ob[r]=!1),ob[r]||n&&!l&&!m||(ob[r]=!0,a(p).trigger(o,g.evArg),l=!0),g.event.currentTarget===document&&(j===Ha&&(nb=[],ob=[]),-1!==a.inArray(q,nb))&&(nb.splice(r,1),ob.splice(r,1)),m&&l){o.h5DelegatingEvent.preventDefault(),j=o.target;var s=o.clientX,t=o.clientY,u=n?"touchmove":"mousemove",v=n?"touchend":"mouseup",w=i(u,j,function(a){var b=a.clientX,c=a.clientY;a.dx=b-s,a.dy=c-t,s=b,t=c}),x=i(v,j),y=function(a){g.event=a,g.evArg=V(arguments),w(g)},z=function(a){g.event=a,g.evArg=V(arguments),x(g)},A=n?a(j):h;k=function(){nb=[],ob=[],A.unbind(u,y),A.unbind(v,z),n||b.rootElement===document||(a(b.rootElement).unbind(u,y),a(b.rootElement).unbind(v,z))},A.bind(u,y),A.bind(v,z),!n&&b.rootElement!==document&&(a(b.rootElement).bind(u,y),a(b.rootElement).bind(v,z))}else j===Ha&&(k(),l=!1)}}}function j(a){return{controller:b,selector:c,eventName:a,handler:i(a)}}var k=null,l=!1,m=[R(b,c,d,e)];return g&&m.push(j("touchstart")),m.push(j("mousedown")),m}()}function U(b,c){var d=b.originalEvent;if(d){var e="touchend"===c||"touchcancel"===c?d.changedTouches[0]:d.touches[0],f=e.pageX,g=e.pageY;b.pageX=d.pageX=f,b.pageY=d.pageY=g,b.screenX=d.screenX=e.screenX,b.screenY=d.screenY=e.screenY,b.clientX=d.clientX=e.clientX,b.clientY=d.clientY=e.clientY,e=b.target,e.ownerSVGElement?e=e.farthestViewportElement:(e===window||e===document)&&(e=document.body),(e=a(e).offset())&&(g-=e.top,b.offsetX=d.offsetX=f-e.left,b.offsetY=d.offsetY=g)}}function V(a){return 3>a.length?a[1]:lb(a).slice(1)}function W(b,c){var d=null,e=null;c&&(d=c[0],e=V(c));var f=d;if(f&&null==f.offsetX&&null==f.offsetY&&f.pageX&&f.pageY){var g=f.target;g.ownerSVGElement?g=g.farthestViewportElement:(g===window||g===document)&&(g=document.body),(g=a(g).offset())&&(f.offsetX=f.pageX-g.left,f.offsetY=f.pageY-g.top)}return new l(b.controller,d,e,b.evSelector,b.evSelectorType)}function X(a){E(a,function(a){a.rootElement=null,a.view.__controller=null})}function Y(c,d,e){return null==c&&b(Na,[d.__name]),!f(c)&&"object"!=typeof c&&b(_a,[d.__name]),c=e?Q(c,e):a(c),0===c.length&&b(Oa,[d.__name]),1<c.length&&b(Pa,[d.__name]),c.get(0)}function Z(b){var c=b.__controllerContext.managed,d=Aa.controllers;-1===a.inArray(b,d)&&!1!==c&&d.push(b),!1!==c&&a(b.rootElement).trigger("h5controllerbound",b),M(b,"__ready")}function $(a){gb(),setTimeout(function(){M(a,"__init")},0)}function _(a,b){E(a,function(a){var c=gb();c.resolve(),a.__controllerContext.templatePromise=c.promise(),a.__controllerContext.initDfd=gb(),a.initPromise=a.__controllerContext.initDfd.promise(),a.__controllerContext.postInitDfd=gb(),a.postInitPromise=a.__controllerContext.postInitDfd.promise(),a.__controllerContext.readyDfd=gb(),a.readyPromise=a.__controllerContext.readyDfd.promise(),a.isInit=!1,a.isPostInit=!1,a.isReady=!1,a.__controllerContext.isUnbinding=!1,a.__controllerContext.isUnbinded=!1,a.__controllerContext.args=b})}function aa(b,c){var d=null,e=c;return a.isPlainObject(e)?d=e.target:e={},d=d?Q(d,b):b.rootElement,r.ui.indicator.call(b,d,e)}function ba(a,b){var c=[],d=null;if(F(a,function(a){if(a[b]&&A(a[b])){try{var e=a[b]()}catch(f){d=d||f}hb(e)&&c.push(e)}}),d)throw d;return c}function ca(a,b,d){function e(){var a=b||d||j||m;if(F(g,function(b){if(b.view&&b.view.__view&&b.view.__view.clear(),a)b.__controllerContext.isDisposed=1;else for(var c in b)b.hasOwnProperty(c)&&(b[c]=null)}),m?l.rejectWith(g,[m]):l.resolveWith(g),a&&(Aa.dispatchEvent({type:"lifecycleerror",detail:a,rootController:g}),b||j))throw b||j}function f(){m=j||c(eb,g.__name,lb(arguments)),e()}var g=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);if(g){if(!fa(g)&&!g.__controllerContext.isDisposing){g.__controllerContext.isDisposing=1;try{da(g,d||b)}catch(h){b=b||h}var i,j=null;try{i=ba(g,"__dispose")}catch(k){b=b||k,j=j||k}var l=g.deferred(),m=null;return j?f():p(i,e,f,!0),l.promise()}}else if(b)throw b}function da(b,c){if(!ga(b)){b.__controllerContext.isUnbinding=1,ha(b,c);var d;try{ba(b,"__unbind")}catch(e){d=e}if(E(b,function(a){var b=a.rootElement;if(b){for(var b=n(b),c=a.__controllerContext.boundHandlers,d=0,e=c.length;e>d;d++)J(c[d],b,!0);a.__controllerContext.boundHandlers=[]}}),b.__controllerContext.unbindList={},Aa.controllers=a.grep(Aa.controllers,function(a){return a!==b}),b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b),X(b),b.__controllerContext.isUnbinded=1,d)throw d}}function ea(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?ea(a,b.parentController):r.core.view}function fa(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function ga(a){return fa(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function ha(a,b){var c=["postInitDfd","readyDfd"],d=[];E(a,function(a){d.push(a);var c=a.__controllerContext.initDfd;c&&!g(c)&&!h(c)&&c.rejectWith(a,[b])});for(var e=0,f=c.length;f>e;e++)for(var i=c[e],j=d.length-1;j>=0;j--){var k=d[j],l=k.__controllerContext[i];l&&!g(l)&&!h(l)&&l.rejectWith(k,[b])}}function ia(a,b){for(var c=a.childNodes,d=0,e=c.length;e>d;d++){var f=c[d];if(1===f.nodeType){if(f=ia(f,b))return f}else if(8===f.nodeType){var g=f.nodeValue;if(0===g.indexOf(Ma)){var h=g.indexOf("}");if(-1!==h&&(g=g.slice(0,h).match(/id="([A-Za-z][\w-:\.]*)"/))&&g[1]===b)return f}}}return null}function ja(a){var b=this;return function(){return a.apply(b,arguments)}}function ka(a){var b=this;return function(){var c=r.u.obj.argsToArray(arguments);return c.unshift(this),a.apply(b,c)}}function la(a,c,d){function e(f){r.u.obj.getByPath("h5.core.view")||b($a),a.view.__view.load(d).done(function(){c.resolve()}).fail(function(a){var b=a.detail.error.status;f===r.settings.dynamicLoading.retryCount||0!==b&&b!==v?setTimeout(function(){c.reject(a)},0):setTimeout(function(){e(++f)},r.settings.dynamicLoading.retryInterval)})}e(0)}function ma(c,d,e,g){var h=f(c),i=h?null:c,c=h?a.trim(c):null,d=a.trim(d),j=!h||Ka.test(c),k=La.test(d);return k&&(d=a.trim(a.trim(d.substring(1,d.length-1)))),h&&j&&(c=a.trim(c.substring(1,c.length-1)),"this"===c&&b(Wa,[e.__name],{controllerDef:e})),{selector:c,bindTarget:i,isGlobal:j,isBindRequested:k,eventName:d,propertyKey:g}}function na(){this.logicProperties=[],this.eventHandlerProperties=[],this.functionProperties=[],this.otherProperties=[],this.bindMap={},this.childControllerProperties=[]}function oa(c){var d,e=new na,f=e.logicProperties,g=e.eventHandlerProperties,h=e.functionProperties,i=e.otherProperties,j=e.bindMap,k=e.childControllerProperties,l={};for(d in c)if(-1!==d.indexOf(" ")&&A(c[d])){g.push(d);var m=a.trim(d),n=m.lastIndexOf(" "),m=ma(m.substring(0,n),m.substring(n+1,m.length),c,d),n=m.selector,o=m.eventName,p=m.isGlobal,q=m.isBindRequested;l[n]||(l[n]={}),l[n][o]||(l[n][o]={}),l[n][o][p]||(l[n][o][p]={}),l[n][o][p][q]?b(Xa,[c.__name,n,o],{controllerDef:c}):l[n][o][p][q]=1,j[d]=m}else jb(d,Da)&&c[d]&&!A(c[d])?k.push(d):jb(d,Ea)&&c[d]&&!A(c[d])?f.push(d):A(c[d])?h.push(d):i.push(d);return e}function pa(){this.logicProperties=[],this.functionProperties=[]}function qa(a,b){if(a===b)return!0;var c=mb(a),d=mb(b);if(!c&&!d)return!1;if(c=c?a.toArray():[a],d=d?b.toArray():[b],c.length!==d.length)return!1;for(var e=0,f=c.length;f>e;e++)if(c[e]!==d[e])return!1;return!0}function ra(a,c){(!a||!a.rootElement)&&b(cb,c)}function sa(a,c){(!a||fa(a))&&b(db,c)}function ta(b){var c=b.bindTarget,d=b.eventName,e=b.handler;c&&typeof c.nodeType!==w||m(c)||mb(c)?a(c).bind(d,e):c&&c.addEventListener?(c.addEventListener(d,e),b.isNativeBind=!0):b.isBindCanceled=!0}function ua(a){this.__controller=a,r.u.obj.getByPath("h5.core.view")&&(this.__view=r.core.view.createView())}function va(a,b,c,d,e){this.__name=b,this.__templates=null,this.rootElement=a,this.__controllerContext={executeListeners:!0,isRoot:e,boundHandlers:[],controllerDef:c},this.__controllerContext.args=d?d:null,this.isReady=this.isPostInit=this.isInit=!1,this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null,this.log=r.log.createLogger(b),this.view=new ua(this)}function wa(){this.rootElement=document,this.controllers=[],a(document).bind(Ja,function(a,b){null==b.target&&(b.target=document),b.indicator=aa(this,b),a.stopPropagation()})}function xa(){this._init()}function ya(c,d,g,h){var j=!h||!h.isInternal,l=d.__name;(!f(l)||0===a.trim(l).length)&&b(Qa,null,{controllerDefObj:d}),g&&!a.isPlainObject(g)&&b(Ra,[l],{controllerDefObj:d}),d.__controllerContext&&b(Sa,null,{controllerDefObj:d});var m=Ba.get(l);m||e(j,c,d,g,l),j&&i(d,l),m||(m=oa(d),Ba.register(l,m)),j&&k(c,d,l);var n=new va(c?a(c).get(0):null,l,d,g,j),o=gb(),l=o.promise().fail(fb),p=gb(),q=p.promise().fail(fb),r=gb(),t=r.promise().fail(fb),u=gb(),v=u.promise();for(j||v.fail(fb),c=n.__controllerContext,c.cache=m,c.preInitDfd=o,c.initDfd=p,c.postInitDfd=r,c.readyDfd=u,n.preInitPromise=l,n.initPromise=q,n.postInitPromise=t,n.readyPromise=v,p=0,q=m.logicProperties.length;q>p;p++)r=m.logicProperties[p],n[r]=za(d[r]);for(l=a.extend(!0,{},d),d=d.__templates,p=gb(),q=p.promise(),d&&0<d.length?la(n,p,d):p.resolve(),q.done(function(){!fa(n)&&!n.__controllerContext.isDisposing&&o.resolveWith(n)}).fail(function(a){o.rejectWith(n,[a]),ca(n,null,a)}),p=0,q=m.childControllerProperties.length;q>p;p++)r=m.childControllerProperties[p],n[r]=ya(null,a.extend(!0,{},l[r]),g,a.extend({isInternal:!0},h));for(p=0,q=m.eventHandlerProperties.length;q>p;p++)r=m.eventHandlerProperties[p],n[r]=s(l,r,!0);for(p=0,q=m.functionProperties.length;q>p;p++)r=m.functionProperties[p],n[r]=s(l,r);for(p=0,q=m.otherProperties.length;q>p;p++)r=m.otherProperties[p],n[r]=l[r];if(j){var w=!1;if(E(n,function(a,b){try{a.__construct&&a.__construct({args:a.__controllerContext.args})}catch(c){ca(n,c)}return fa(a)||a.__controllerContext.isDisposing?(w=!0,!1):void(a===n?(a.rootController=a,a.parentController=null):(a.parentController=b,a.rootController=b.rootController))}),w)return null}return c.managed=h&&h.managed,j&&$(n),n}function za(c){function d(c,e){var g=c.__name;(!f(g)||0===a.trim(g).length)&&b(Ya,null,{logicDefObj:c}),c.__logicContext&&b(Za,null,{logicDefObj:c});var h=Ba.get(g);if(!h){e&&j(c);var i,h=new pa,k=h.functionProperties,l=h.logicProperties;for(i in c)c.hasOwnProperty(i)&&jb(i,Ea)?l.push(i):A(c[i])&&k.push(i)}i=a.extend(!0,{},c);for(var m=h.functionProperties,k=0,l=m.length;l>k;k++){var n=m[k];i[n]=s(i,n)}for(i.deferred=gb,i.log=r.log.createLogger(g),i.__logicContext={logicDef:c},i.own=ja,i.ownWithOrg=ka,m=h.logicProperties,k=0,l=m.length;l>k;k++)n=m[k],i[n]=d(i[n]);return A(i.__construct)&&i.__construct(),Ba.register(g,h),i}return d(c,!0)}var Aa,Ba,Ca={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},Da="Controller",Ea="Logic",Fa="h5trackstart",Ga="h5trackmove",Ha="h5trackend",Ia="rootElement",Ja="triggerIndicator",Ka=/^\{.*\}$/,La=/^\[.*\]$/,Ma="{h5view ",Na=6001,Oa=6003,Pa=6004,Qa=6006,Ra=6007,Sa=6008,Ta=6009,Ua=6010,Va=6011,Wa=6012,Xa=6013,Ya=6017,Za=6018,$a=6029,_a=6030,ab=6033,bb=6034,cb=6035,db=6036,eb=6038,fb=function(){},gb=r.async.deferred,hb=r.async.isPromise,ib=r.u.str.startsWith,jb=r.u.str.endsWith,kb=r.u.str.format,lb=r.u.obj.argsToArray,mb=r.u.obj.isJQueryObject,nb=[],ob=[],pb="",qb=function(){var a=document.createElement("div");return typeof a.style.touchAction!==w?(pb="touchAction",!0):typeof a.style.msTouchAction!==w?(pb="msTouchAction",!0):!1}();a.extend(l.prototype,Ca),a.extend(ua.prototype,{get:function(a,b){return ra(this.__controller,"view#get"),ea(a,this.__controller).get(a,b)},update:function(a,b,c){return ra(this.__controller,"view#update"),a=Q(a,this.__controller),ea(b,this.__controller).update(a,b,c)},append:function(a,b,c){return ra(this.__controller,"view#append"),a=Q(a,this.__controller),ea(b,this.__controller).append(a,b,c)},prepend:function(a,b,c){return ra(this.__controller,"view#prepend"),a=Q(a,this.__controller),ea(b,this.__controller).prepend(a,b,c)},load:function(a){return ra(this.__controller,"view#load"),this.__view.load(a)},register:function(a,b){ra(this.__controller,"view#register"),this.__view.register(a,b)},isValid:function(a){return ra(this.__controller,"view#isValid"),this.__view.isValid(a)},isAvailable:function(a){return ra(this.__controller,"view#isAvailable"),ea(a,this.__controller).isAvailable(a)},clear:function(a){ra(this.__controller,"view#clear"),this.__view.clear(a)},getAvailableTemplates:function(){return ra(this.__controller,"view#getAvailableTemplates"),this.__view.getAvailableTemplates()},bind:function(b,c){ra(this.__controller,"view#bind");var d=b;if(f(b)&&0===b.indexOf("h5view#")){for(var e=ia(this.__controller.rootElement,b.slice(7)),d=e.nodeValue,d=d.slice(d.indexOf("}")+1),g=a("<div>").append(d),d=[],h=g[0].childNodes,i=0,j=h.length;j>i;i++)d.push(h[i]);for(g.empty(),g=document.createDocumentFragment(),i=0,j=d.length;j>i;i++)g.appendChild(d[i]);e.parentNode.insertBefore(g,e.nextSibling)}return this.__view.bind(d,c)}}),a.extend(va.prototype,{$find:function(b){return sa(this,"$find"),ra(this,"$find"),a(this.rootElement).find(b)},deferred:function(){return sa(this,"deferred"),gb()},trigger:function(b,c){sa(this,"trigger"),ra(this,"trigger");var d=f(b)?a.Event(b):b;return a(this.rootElement).trigger(d,c),d},own:function(){return sa(this,"own"),ja.apply(this,lb(arguments))},ownWithOrg:function(){return sa(this,"ownWithOrg"),ka.apply(this,lb(arguments))},bind:function(a,c){return sa(this,"bind"),this.__controllerContext.isRoot||b(6031),this.rootElement=Y(a,this),this.view.__controller=this,_(this,c?c:null),$(this),this},unbind:function(){sa(this,"unbind"),ra(this,"unbind"),this.__controllerContext.isRoot||b(6031),this.rootController||b(6037);try{da(this)}catch(a){ca(this,a)}},dispose:function(){return sa(this,"dispose"),this.__controllerContext.isRoot||b(6031),ca(this)},triggerIndicator:function(b){sa(this,"triggerIndicator"),ra(this,"triggerIndicator");var c={indicator:null};return b&&a.extend(c,b),a(this.rootElement).trigger(Ja,[c]),c.indicator},indicator:function(a){return sa(this,"indicator"),ra(this,"indicator"),aa(this,a)},enableListeners:function(){sa(this,"enableListeners"),K(this,!0)},disableListeners:function(){sa(this,"disableListeners"),K(this,!1)},throwError:function(a,b){sa(this,"throwError");var c=lb(arguments);c.unshift(null),this.throwCustomError.apply(this,c)},throwCustomError:function(a,c,d){sa(this,"throwCustomError"),2>arguments.length&&b(6005);var e=null;throw c&&f(c)?e=Error(kb.apply(null,lb(arguments).slice(1))):(e=Error(),e.detail=c),e.customType=a,e},on:function(a,b,c){for(sa(this,"on"),ra(this,"on"),a=ma(a,b,this),c=H(this,a,c),a=0,b=c.length;b>a;a++)I(c[a],n(this.rootElement))},off:function(a,b,c){sa(this,"off"),ra(this,"off");for(var d=ma(a,b,this),a=this.__controllerContext.boundHandlers,e=null,f=d.bindTarget,b=d.eventName,g=d.selector,h=d.isGlobal,d=d.isBindRequested,i=0,j=a.length;j>i;i++){var k=a[i];if(f){if(qa(f,k.bindTarget)&&b===k.eventName&&k.originalHandler===c){e=k;break}}else if(g===k.selector&&h===k.isGlobal&&d===k.isBindRequested&&c===k.originalHandler){e=k;break}}e&&J(e,n(this.rootElement))}}),r.mixin.eventDispatcher.mix(wa.prototype),a.extend(wa.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,c){for(var e=c&&c.deep,f=c&&c.name?d(c.name):null,g=a(b)[0],h=this.controllers,i=[],j=0,k=h.length;k>j;j++){var l=h[j];!(f&&-1===a.inArray(l.__name,f))&&l.rootElement&&(g===l.rootElement?i.push(l):e&&n(g)===n(l.rootElement)&&a.contains(g,l.rootElement)&&i.push(l))}return i}}),a.extend(xa.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}}),Ba=new xa,Aa=new wa,r.u.obj.expose("h5.core",{controllerManager:Aa,definitionCacheManager:{clear:function(a){Ba.clear(a)},clearAll:function(){Ba.clearAll()}}});var rb=function(){var a,b={},c=new va(null,"a");for(a in c)c.hasOwnProperty(a)&&"__name"!==a&&"__templates"!==a&&"__meta"!==a&&(b[a]=1);c=va.prototype;for(a in c)c.hasOwnProperty(a)&&(b[a]=null);return b}();B.controllerInternal=ya,r.u.obj.expose("h5.core",{controller:function(a,c,d){return 2>arguments.length&&b(6032),ya(a,c,d)},logic:za,expose:function(a){var c=a.__name;c||b(6019,null,{target:a});var d=c.lastIndexOf(".");if(-1===d)window[c]=a;else{var e=c.substr(0,d),c=c.substr(d+1,c.length),d={};d[c]=a,r.u.obj.expose(e,d)}}})}(),function(){function c(a){return(a=a&&f(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function e(b,c){return function d(b,e){if(!c[b])return!1;for(var f=0,g=c[b].length;g>f;f++)if(-1<a.inArray(c[b][f],e)||d(c[b][f],e.concat([b])))return!0;return!1}(b,[])}function g(a){return"number"==typeof a&&isNaN(a)}function h(a,b){return null==a||g(a)||"number"==typeof a||!b&&(a instanceof Number||!(!(f(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function j(a,b){return null==a||"number"==typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"==typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function k(c,d,e){function g(){if(h.push(u.call(this,arguments)),e)throw null}var h=[];try{if(!a.isPlainObject(c))throw g($),null;i(c.name)||g(_);var j=c.base,k=null;if(null!=j)if(f(j)&&0===j.indexOf("@")){var l=j.substring(1);d.models[l]?k=d.models[l].schema:g(ba,l)}else g(aa);var m=c.schema;if(!k&&null==m&&g(ca),!k&&!a.isPlainObject(m))throw g(da),null}catch(n){b(S,null,h)}}function l(k,l,m,n){function o(){if(p.push(u.call(this,arguments)),n)throw null}"object"!=typeof k&&b(U);var p=[];try{if(l){var q,r=!1;for(q in k)k[q]&&!0===k[q].id&&(r&&o(ea),r=!0);r||o(fa)}var s={},r=function(a){if(null!=a){if(y&&o(ha,t),x.hasOwnProperty("defaultValue")&&o(Aa,t),null==a.on)o(ia,t);else for(var b=d(a.on),c=0,e=b.length;e>c;c++)if(!k.hasOwnProperty(b[c])){o(ia,t);break}"function"!=typeof a.calc&&o(ja,t),s[t]=d(a.on)}};q=function(a){y&&null==a&&(a="string");var b={};null!=a&&(f(a)?(y&&"string"!==a&&"integer"!==a&&o(Ca,t),b=c(a),b.elmType?(b.dataModel&&(l||o(la,t,b.dataModel),m.models[b.dataModel]||o(ma,t,b.dataModel)),"enum"===b.elmType&&null==x.enumValue&&o(na,t)):o(la,t,a)):o(ka,t))};var t,v=function(b,c){if(null!=b)if(a.isPlainObject(b)){for(var d in b){var e=b[d];if(null!=e)switch(d){case"notNull":!0!==e&&!1!==e?o(pa,t,d):y&&!e&&o(za,t,d,e);break;case"min":case"max":switch(c.elmType){case"integer":(f(e)||!j(e)||g(e))&&o(qa,t,d);break;case"number":(f(e)||f(e)||!h(e)||1/0===e||-(1/0)===e||g(e))&&o(qa,t,d);break;default:o(ra,t,d,c.elmType)}break;case"minLength":case"maxLength":switch(c.elmType){case"string":f(e)||!j(e)||g(e)||0>e?o(ta,t,d):y&&"maxLength"===d&&0===e&&o(za,t,d,e);break;default:o(ra,t,d,c.elmType)}break;case"notEmpty":switch(c.elmType){case"string":!0!==e&&!1!==e?o(pa,t,d):y&&!e&&o(za,t,d,e);break;default:o(ra,t,d,c.elmType)}break;case"pattern":switch(c.elmType){case"string":"regexp"!==a.type(e)&&o(sa,t,d);break;default:o(ra,t,d,c.elmType)}}}b.notEmpty&&0===b.maxLength&&o(ua,t,"notEmpty","maxLength"),null!=b.min&&null!=b.max&&b.min>b.max&&o(ua,t,"min","max"),null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&o(ua,t,"minLength","maxLength")}else o(oa,t)},w=function(b,c){null!=b&&("enum"!==c.elmType&&o(va,t),(!z(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&o(wa,t))};for(t in k){var x=null==k[t]?{}:k[t],y=l&&!!x.id;i(t)||o(ga,t),r(x.depend),q(x.type);var A={},B=y&&null==B?"string":x.type;f(B)&&(A=c(B)),v(x.constraint,A),w(x.enumValue,A),y&&x.hasOwnProperty("defaultValue")&&o(xa,t)}for(var C in s)e(C,s)&&o(Ba,C)}catch(D){b(V,null,p)}return!0}function m(a,d){var e=[];try{for(var f in a){var g=a[f];if(g&&(g.hasOwnProperty("defaultValue")||!g.type||"array"!==g.type&&!c(g.type).dimension)&&g.hasOwnProperty("defaultValue")){var h=g.defaultValue;d[f](h).length&&pushErrorReason(ya,f,h)}}return!0}catch(i){b(V,null,e)}}function n(a,b,d){var e,f={};for(e in a){var g,h=f,i=e;g=d;var j=a[e]||{},k=[],l=null,m=0,l=j.type,n=j.constraint||{};b&&j.id&&(l=l||"string",n.notNull=!0,"string"===l&&(n.notEmpty=!0)),l&&(m=c(l),l=m.elmType,m=m.dimension,k.push(p(l,{manager:g,enumValue:j.enumValue}))),n&&k.push(o(n)),g=q({checkFuncs:k,dimension:m}),h[i]=g}return f}function o(a){return function(b){var c=[];return a.notNull&&null==b&&c.push({notNull:a.notNull}),a.notEmpty&&!b&&c.push({notEmpty:a.notEmpty}),null==b?c:(null!=a.min&&b<a.min&&c.push({min:a.min}),null!=a.max&&a.max<b&&c.push({max:a.max}),null!=a.minLength&&b.length<a.minLength&&c.push({minLength:a.minLength}),null!=a.maxLength&&a.maxLength<b.length&&c.push({maxLength:a.maxLength}),null!=a.pattern&&!b.match(a.pattern)&&c.push({pattern:a.pattern}),c)}}function p(b,c){var d=[{type:b}];switch(b){case"number":return function(a,b){return h(a,b)?[]:d};case"integer":return function(a,b){return j(a,b)?[]:d};case"string":return function(a,b){return null==a||f(a)||!b&&a instanceof String?[]:d};case"boolean":return function(a,b){return null==a||"boolean"==typeof a||!b&&a instanceof Boolean?[]:d};case"enum":return function(b){var e;a:if(e=c.enumValue,g(b)){for(var b=0,f=e.length;f>b;b++)if(g(e[b])){e=!0;break a}e=!1}else e=null===b||-1<a.inArray(b,e);return e?[]:d};case"any":return function(){return[]}}var e=b.match(/^@(.+?)$/)[1],i=c.manager;return function(a){var b=i.models[e];return!b||"object"!=typeof a&&null!=a?d:null==a||b.has(a)?[]:d}}function q(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};var c=a.dimension||0;return function(a,d){function e(a,g){if(!g){for(var h=0,i=b.length;i>h;h++){var j=b[h](a,d);if(j.length)return f=f.concat(j),!1}return!0}if(null==a)return!0;if(!z(a)&&!r.core.data.isObservableArray(a))return f.push({dimension:c}),!1;for(h=0,i=a.length;i>h;h++)if(!e(a[h],g-1))return!1;return!0}var f=[];return e(a,c),f}}function s(a,b){a._values={},a._nullProps={};for(var c in b)if(b[c]&&t(b[c].type)){var d=N();d.relatedItem=a,a._values[c]=d,a._nullProps[c]=!0}}function t(a){return a?-1!==a.indexOf("[]"):!1}function u(){return{code:arguments[0]}}function v(c,e,f,g){function h(b){for(var b=d(k[b].depend.on),e=0,f=b.length;f>e;e++)if(-1===a.inArray(b[e],c._realProperty)&&-1!==a.inArray(b[e],j))return!1;return!0}function i(b,c){for(var d=0,e=c.length;e>d;d++){var f=l[c[d]];if(f)for(var g=0,h=f.length;h>g;g++){var i=f[g];-1===a.inArray(i,b)&&b.push(i)}}}var j=[],k=c.schema||c._model.schema,l=c._dependencyMap,m={};for(g?j=c._dependProps.slice():i(j,d(f));0!==j.length;){for(var f=[],g=0,n=j.length;n>g;g++){var o=j[g];if(h(o)){var p=k[o].depend.calc.call(c,e);0!==c._validateItemValue(o,p,!0).length&&b(Z,[c._model?c._model.name:Da,o,p]),m[o]={oldValue:c._values[o],newValue:p},k[o]&&t(k[o].type)?p?(c._values[o].copyFrom(p),c._nullProps[o]=!1):(c._values[o].copyFrom([]),c._nullProps[o]=!0):c._values[o]=p}else f.push(o)}i(f,j),j=f}return m}function x(a,c,d,e){for(var f in d){f in a||b(Y,[e?e.name:Da,f]);var g=d[f];a[f]&&t(a[f].type)&&!d.hasOwnProperty(f)||(g=c(f,g,e&&e._idKey===f),0<g.length&&b(W,[e?e.name:Da,f],g))}}function y(c,d,e,f){var i,j=c.schema||c._model.schema,k=[];for(i in d)if(!e||-1===a.inArray(i,e)){var l=c._values[i],m=d[i];if(j[i]&&j[i].depend)l!==m&&b(X,[c._model?c._model.name:Da,i]);else{var n=j[i]&&j[i].type;if(t(n)&&(null==m?(m=[],c._nullProps[i]=!0):c._nullProps[i]=!1),n&&n.match(/string|number|integer|boolean/)){var o=m;if(z(o)){for(var o=o.slice(0),m=0,p=o.length;p>m;m++)o[m]=o[m]&&"object"==typeof o[m]?o[m]&&o[m].valueOf&&o[m].valueOf():o[m];m=o}else m=o&&"object"==typeof o&&o.valueOf?o.valueOf():o}if(null!=m&&n&&n.match(/number|integer/)&&"number"!=typeof m)if(z(m)||r.core.data.isObservableArray(m))for(o=0,p=m.length;p>o;o++)null!=m[o]&&h(m[o])&&(m[o]=parseFloat(m[o]));else null!=m&&(m=parseFloat(m));t(n)&&l&&l.equals(m,l)||l===m||g(l)&&g(m)||(n&&-1!==n.indexOf("[]")&&r.core.data.isObservableArray(l)&&(l=l.toArray()),k.push({p:i,o:l,n:m}))}}if(k.length){for(d={},e=[],o=0,i=k.length;i>o;o++)l=k[o],j[l.p]&&t(j[l.p].type)?l.n&&c._values[l.p].copyFrom(l.n):c._values[l.p]=l.n,d[l.p]={oldValue:l.o,newValue:c.get(l.p)},e.push(l.p);return j={type:!0===f?"create":"change",target:c,props:d},a.extend(d,v(c,j,e,f)),j}}function B(a){var b=a._manager,a=a.name;return b._updateLogs||(b._updateLogs={}),b._updateLogs[a]||(b._updateLogs[a]={}),b._updateLogs[a]}function C(a,b,c){if(a._manager)for(var d=B(a),e=0,f=c.length;f>e;e++){var g=c[e],h=g._values[a._idKey];d[h]||(d[h]=[]),d[h].push({type:b,item:g})}}function D(a,b){if(a._manager){var c=B(a),d=b.target._values[a._idKey];c[d]||(c[d]=[]),c[d].push({type:Ea,ev:b})}}function E(b){var c,e={};for(c in b)if(b.hasOwnProperty(c)){var f=b[c]?b[c].depend:null;if(f)for(var f=d(f.on),g=0,h=f.length;h>g;g++){var i=f[g];e[i]||(e[i]=[]),-1===a.inArray(c,e[i])&&e[i].push(c)}}return e}function F(b,c){k(b,c,!0);var d;d=(d=b.base)?c.models[d.slice(1)].schema:{},d=a.extend({},d,b.schema),l(d,!0,c,!0);var e=n(d,!0,c);return m(d,e,!0),new J(d,b,e,c)}function G(b,c){var d,e=[],f=[],g=[];for(d in b)b[d]&&b[d].depend?f.push(d):e.push(d),b[d]&&b[d].type&&-1!==b[d].type.indexOf("[]")&&g.push(d);d=E(b);var h,i={};for(h in b){var j=b[h];if(!j||!j.depend){var k=null,k=j&&void 0!==j.defaultValue?j.defaultValue:null;i[h]=k}}return{_realProps:e,_dependProps:f,_aryProps:g,_dependencyMap:d,_createInitialValueObj:function(b){if(!b)return a.extend({},i);var c,d=a.extend({},i);for(c in b)d[c]=b[c];return d},_validateItemValue:function(a,b,d){return c[a](b,d)}}}function H(c,d,e,f){var g=!1,h=["sort","reverse","pop","shift"],i=null;e.addEventListener("changeBefore",function(e){f&&(c._isRemoved||!f._manager)&&b(T,[c._values[f._idKey],e.method]);var j=r.u.obj.argsToArray(e.args);if(-1===a.inArray(e.method,h)){var k=!0;switch(e.method){case"splice":k=!1,j.shift(),j.shift();break;case"copyFrom":j=j[0];break;case"set":j.shift()}k&&(e=c._validateItemValue(d,j),0<e.length&&b(W,d,e))}f?(f._manager&&(e=f._manager,j=f.name,e._oldValueLogs||(e._oldValueLogs={}),e._oldValueLogs[j]||(e._oldValueLogs[j]={}),e=e._oldValueLogs[j],j=c._values[f._idKey],e[j]||(e[j]={}),e[j][d]||(e[j][d]=c._values[d].toArray())),(g=f._manager?f._manager.isInUpdate():!1)||f._manager.beginUpdate()):i=c._values[d].toArray()}),e.addEventListener("change",function(a){if(!c._isInSet&&null!==a.method){var b={type:"change",target:c,props:{}};b.props[d]={},f?(D(f,b),g?a.stopImmediatePropagation():(f._manager._isArrayPropChangeSilentlyRequested=!0,f._manager.endUpdate(),f._manager._isArrayPropChangeSilentlyRequested=!1)):e.equals(i)||(b.props[d]={oldValue:i,newValue:c._values[d]},c.dispatchEvent(b))}})}function I(a){i(a)||b(R),this.models={},this.name=a,this._updateLogs=null,this._isArrayPropChangeSilentlyRequested=!1}function J(a,b,c,d){this.items={},this.size=0,this.name=b.name,this._manager=d;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===b?P:Q:P,this.schema=a,this._itemConstructor=K(a,c,this),d.models[this.name]=this}function K(b,c,d){function e(a){s(this,b,f,a),a=f._createInitialValueObj(a),x(b,f._validateItemValue,a,d),y(this,a,null,!0);for(var a=f._aryProps,c=0,e=a.length;e>c;c++)H(this,a[c],this.get(a[c]),d)}var f=G(b,c);return d._schemaInfo=f,r.mixin.eventDispatcher.mix(e.prototype),a.extend(e.prototype,f,Fa,{_model:d,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}}),e}function L(){}function M(){this.length=0,this._src=[]}function N(){return new M}function O(a){return a&&a.constructor===M?!0:!1}var P="string",Q="number",R=15e3,S=15001,T=15005,U=15008,V=15009,W=15011,X=15012,Y=15013,Z=15016,$=15900,_=15901,aa=15902,ba=15903,ca=15904,da=6,ea=15800,fa=15801,ga=15802,ha=15803,ia=15804,ja=15805,ka=15806,la=15807,ma=15808,na=15809,oa=15810,pa=15811,qa=15812,ra=15813,sa=15814,ta=15815,ua=15816,va=15817,wa=15818,xa=15819,ya=15820,za=15821,Aa=15822,Ba=15823,Ca=15824,Da="n/a",Ea=2,Fa={get:function(c){if(0===arguments.length)return a.extend({},this._values);var d=this._model;return(d?d.schema:this.schema).hasOwnProperty(c)||b(15014,[d?d.name:Da,c]),this._values[c]},set:function(a){var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);var d=this._model;if(d&&(this._isRemoved||!d._manager)&&b(T,[this._values[this._model._idKey],"set"],this),d)d._idKey in c&&c[d._idKey]!==this._values[d._idKey]&&b(15003,[d.name,this._idKey]),x(d.schema,d._schemaInfo._validateItemValue,c,d);else{var e=this.validate(c);if(e)throw e}var e=null,f=d?d._manager.isInUpdate():!1;d&&!f&&d._manager.beginUpdate(),this._isInSet=!0,e=y(this,c),this._isInSet=!1,d?(e&&D(d,e),f||d._manager.endUpdate()):e&&this.dispatchEvent(e)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};r.mixin.eventDispatcher.mix(I.prototype),a.extend(I.prototype,{createModel:function(c){if((!c||"object"!=typeof c)&&b(S,null,[u($)]),!z(c))return this.models[c.name]?this.models[c.name]:F(c,this);var d=c.length;d||b(S,null,[u($)]);for(var e={},f=[],g=0;d>g;g++){var h=c[g].name;if(this.models[h])m[g]=manager.models[c.name];else try{f.push(h),h=[],c[g].base&&h.push(c[g].base.substring(1));for(var i in c[g].schema){var j=c[g].schema[i];if(j){var k=j.type;k&&"@"===k.substring(0,1)&&(k=-1===k.indexOf("[]")?k.substring(1):k.substring(1,k.length-2),h.push(k))}}e[g]={depends:h}}catch(l){b(S)}}for(var m={size:0};m.size<d;){for(i={},j=!1,g=0;d>g;g++)if(!e[g].registed){for(var h=e[g].depends,k=0,n=h.length;n>k;k++)if(!this.models[h[k]]){i[h[k]]=!0;break}k===n&&(m[g]=F(c[g],this),m.size++,j=!0,e[g].registed=!0)}if(!j){var o,g=!0;for(o in i)if(-1===a.inArray(o,f)){g=!1;break}g&&b(15004),b(S,null,[u(ba,o)])}}for(c=[],g=0;d>g;g++)c.push(m[g]);return c},dropModel:function(a){if((a=f(a)?a:"object"==typeof a?a.name:null)&&this.models[a]){var b=this.models[a];return b._manager=null,delete this.models[a],b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,c=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var d,e={};for(d in b)if(b.hasOwnProperty(d)){var f;f=this.models[d];var h=b[d],i=[],j=[],k=[],l=[],m=void 0;for(m in h){for(var n=h[m],o=!0,p=[],q=n.length-1;q>=0;q--){var r=n[q],s=r.type;if(s!==Ea){a:{for(o=0;q>o;o++){var t=n[o].type;if(1===t||3===t){q=n[o];break a}}q=null}1===s?q&&3===q.type?i.push({id:m,oldItem:q.item,newItem:r.item}):j.push(r.item):(q=q&&3===q.type?q.item:q?null:r.item)&&(l.push(q),q.dispatchEvent({type:"remove",model:f})),o=!1;break}p.push(r.ev)}if(o&&0<p.length){for(r={},q=p.length-1;q>=0;q--)for(var u in p[q].props)r[u]||(O(f.get(m).get(u))?(s=c&&c[f.name]&&c[f.name][m]&&c[f.name][m][u],f.get(m).get(u).equals(s)||(r[u]={oldValue:s})):r[u]={oldValue:p[q].props[u].oldValue});q=!1;for(u in r)s=r[u].oldValue,n=f.get(m).get(u),s===n||g(s)&&g(n)?delete r[u]:(q=f.get(m).get(u),
a&&O(q)&&q.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),r[u].newValue=q,q=!0);q&&(p={type:"change",target:p[0].target,props:r},k.push(p),p.target.dispatchEvent(p))}}(f=0===j.length&&0===i.length&&0===l.length&&0===k.length?!1:{created:j,recreated:i,removed:l,changed:k})&&(e[d]=f)}a=!1;for(d in e)a=!0,f=e[d],this.models[d].dispatchEvent({type:"itemsChange",created:f.created,recreated:f.recreated,removed:f.removed,changed:f.changed});e={type:"itemsChange",models:e},a&&this.dispatchEvent(e)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,c={};c[a.target.name]=a,b.dispatchEvent({type:"itemsChange",models:c})}}),r.mixin.eventDispatcher.mix(J.prototype),a.extend(J.prototype,{create:function(a){this._manager||b(15006,[this.name,"create"]);var c=this.validate(a,!0);if(c)throw c;(c=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var e=[],f=d(a),g=[],h=this._idKey,i=0,j=f.length;j>i;i++){var k=f[i],l=k[h],m=this._findById(l);m?(g.push(m),(l=y(m,k,[h]))&&D(this,l)):(k=new this._itemConstructor(k),this.items[l]=k,this.size++,e.push(k),g.push(k))}return 0<e.length&&C(this,1,e),c||this._manager.endUpdate(),z(a)?g:g[0]},validate:function(a,c){try{var e=this._idKey,f=d(a);if("object"!=typeof a&&!z(a)&&b(15007),c)for(var g=0,h=f.length;h>g;g++){var i=f[g],j=i[e];(""===j||null==j)&&b(15002,[this.name,e]);var k=this._schemaInfo._createInitialValueObj(i);x(this.schema,this._schemaInfo._validateItemValue,k,this)}else for(var g=0,l=f.length;l>g;g++)i=f[g],x(this.schema,this._schemaInfo._validateItemValue,i,this)}catch(m){return m}return null},get:function(a){if(z(a)||r.core.data.isObservableArray(a)){for(var b=[],c=0,d=a.length;d>c;c++)b.push(this._findById(a[c]));return b}return this._findById(a)},remove:function(a){this._manager||b(15006,[this.name,"remove"]);var c=this._manager?this._manager.isInUpdate():!1;c||this._manager.beginUpdate();for(var e=this._idKey,g=d(a),h=[],i=[],k=0,l=g.length;l>k;k++)if(this.has(g[k])){var m=f(g[k])||j(g[k],!0)?g[k]:g[k]._values[e],n=this.items[m];delete this.items[m],this.size--,i.push(n),n._model&&(n._isRemoved=!0),h.push(n)}else i.push(null);return 0<h.length&&C(this,3,h),c||this._manager.endUpdate(),z(a)?i:i[0]},removeAll:function(){var a=this.toArray();return 0<a.length&&this.remove(a),a},has:function(a){return f(a)||j(a,!0)?!!this._findById(a):"object"==typeof a?null!=a&&A(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){return a=this.items[a],typeof a===w?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",created:[],recreated:[],removed:[],changed:[a]},this.dispatchEvent(a),this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a,b=[],c=this.items;for(a in c)c.hasOwnProperty(a)&&b.push(c[a]);return b}}),r.mixin.eventDispatcher.mix(L.prototype),a.extend(L.prototype,Fa,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]),x(this.schema,this._validateItemValue,b)}catch(c){return c}return null}}),r.mixin.eventDispatcher.mix(M.prototype);var Ga,Ha={equals:function(a){var b=this.length;if(!z(a)&&!O(a)||a.length!==b)return!1;for(var a=O(a)?a._src:a,c=0;b>c;c++){var d=this[c],e=a[c];if(!(d===e||g(d)&&g(e)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]),a=O(a)?a._src:a,z(a)||b(15010,[0,a]),a=a.slice(0),a.unshift(0,this.length),Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=r.u.obj.argsToArray(arguments),b=0,c=a.length;c>b;b++)O(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},Ia="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(",");for(Ga in Ha)Ha.hasOwnProperty(Ga)&&-1===a.inArray(Ga,Ia)&&Ia.push(Ga);var Ja=["concat","slice","splice","filter","map"],Ka=["reverse","sort"],La="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");Ga=0;for(var Ma=Ia.length;Ma>Ga;Ga++){var Na=Ia[Ga];M.prototype[Na]=function(b){function c(){var c=d.apply(this._src,arguments);if(-1!==a.inArray(b,Ka))c=this;else if(-1!==a.inArray(b,Ja)){var e=N();e.copyFrom(c),c=e}return c}var d=Ha[b]?Ha[b]:Array.prototype[b];return-1===a.inArray(b,La)?c:function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=c.apply(this,arguments);return this.length=this._src.length,this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a}),a}}}(Na)}r.u.obj.expose("h5.core.data",{createManager:function(a,c){i(a)||b(R);var d=new I(a);if(null!=c){""===c&&(c="window");var e={};e[a]=d,r.u.obj.expose(c,e)}return d},createObservableArray:N,createObservableItem:function(a){l(a,!1,null,!0);var b=n(a);m(a,b,!0);var c=new L,b=G(a,b);s(c,a,b),c.schema=a;for(var d in b)c[d]=b[d];for(d=b._createInitialValueObj(),x(a,b._validateItemValue,d),y(c,d,null,!0),a=0,b=c._aryProps.length;b>a;a++)H(c,c._aryProps[a],c.get(c._aryProps[a]));return c},isObservableArray:O,isObservableItem:function(a){return!(!a||!a.constructor||!a._validateItemValue||A(a.getModel))},createSequence:function(b,c,d){function e(){return j}function f(){var a=j;return j+=k,a}function g(){return j.toString()}function h(){var a=j;return j+=k,a.toString()}function i(){}var j=null!=b?b:1,k=null!=c?c:1,b=1===d?{current:g,next:h,returnType:1}:{current:e,next:f,returnType:2};return b.setCurrent=function(a){j=a},a.extend(i.prototype,b),new i},SEQ_STRING:1,SEQ_INT:2})}(),function(){function c(a,b){return a&&a.nodeType===x?a.getAttribute(b):void 0}function e(a){if(!a)return null;for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b}function f(a,b,c,e){var f=[],b=d(b);if(!0===e)return g(f,a,b,c),f;for(var a=a.childNodes,e=0,h=a.length;h>e;e++)g(f,a[e],b,c);return f}function g(a,b,c,d){if(b.nodeType===x){for(var e=0,f=c.length;f>e;e++){var h=b.getAttribute(c[e]);if(typeof d===w){if(null!==h){a.push(b);break}}else if(null!==h&&h==d){a.push(b);break}}if(0<b.childNodes.length)for(b=b.childNodes,e=0,f=b.length;f>e;e++)g(a,b[e],c,d)}}function h(b,e){for(var b=d(b),g=[],h=0,i=b.length;i>h;h++){var j=b[h];if(j.nodeType===x&&(!0!==e||null==c(j,B)&&null==c(j,C)))for(var k=f(j,A,void 0,!0),l=0,m=k.length;m>l;l++){for(var n=!0,o=k[l];null!=o&&o!==j;o=o.parentNode)if(null!=c(o,B)||null!=c(o,C)){n=!1;break}n&&g.push(k[l])}}return a(g)}function i(b,d,e){for(var g=[],h=0,i=b.length;i>h;h++){var j=b[h];if(j.nodeType===x){if(!0===e){if(null!=j.getAttribute(d)){g.push(j);continue}if(null!=c(j,B)||null!=c(j,C))continue}for(var k=f(j,d,void 0,!1),l=0,m=k.length;m>l;l++){var n=a(k[l])[0],o=n.parentNode;(null==c(o,B)&&null==c(o,C)||o===j)&&g.push(n)}}}return a(g)}function j(a){return a&&a.addEventListener&&a.getModel&&!z(a)&&!r.core.data.isObservableArray(a)||r.core.data.isObservableItem(a)?!0:!1}function k(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.nodeType===x&&e.setAttribute(E,b)}}function l(d,f,g){var h=O++,i=f[0];if(a(i).empty(),g){!z(g)&&!r.core.data.isObservableArray(g)&&b(M),k(f,h),d._addBindingEntry(g,i,h),r.core.data.isObservableArray(g)&&!d._isWatching(g)&&(f=function(a){d._observableArray_changeListener(a)},d._listeners[d._getContextIndex(g)]=f,g.addEventListener("change",f));var f=c(i,D),f=e(d._getSrcCtxNode(f).childNodes),j=[];d._loopElementsMap[h]=j;for(var h=i.ownerDocument.createDocumentFragment(),l=g.get?function(a){return g.get(a)}:function(a){return g[a]},n=0,o=g.length;o>n;n++){for(var p=[],q=0,s=f.length;s>q;q++){var t=y(f[q]);p.push(t),h.appendChild(t)}j[n]=p,i.appendChild(h),m(d,p,l(n),!1,!0)}}}function m(a,c,e,f,g){if(c=d(c),f)l(a,c,e);else{f=O++,e&&(("object"!=typeof e||z(e)||r.core.data.isObservableArray(e))&&b(M),k(c,f),a._addBindingEntry(e,c,f));var i=j(e);i&&!a._isWatching(e)&&(f=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(e)]=f,e.addEventListener("change",f)),h(c,g).each(function(){o(this,e,i)}),n(a,c,e,!1,g),n(a,c,e,!0,g)}}function n(a,b,d,e,f){var g=e?"data-h5-loop-context":"data-h5-context";i(b,g,f).each(function(){var b=c(this,g),f=null;d&&(f=j(d)?d.get(b):d[b]),m(a,this,f,e)})}function o(d,e,f){for(var g=c(d,A).split(I),h=[],i=[],j=[],k=0,l=g.length;l>k;k++){var m=g[k];if(-1===m.indexOf(H))0<a.trim(m).length&&(h.push(null),i.push(null),j.push(a.trim(m)));else{var n=m.split(H),m=a.trim(n[0]),n=a.trim(n[1]),o=null,p=J.exec(m);p&&(o=p[1],m=/(\S+)[\s\(]/.exec(m)[1]),0<m.length&&0<n.length&&(h.push(m),i.push(o),j.push(n))}}for(g=d.tagName.toLowerCase(),k=a(d),l=0,m=h.length;m>l;l++){var o=h[l],p=i[l],q=j[l],n=null;switch(e&&(n=f?e.get(q):e[q]),null==o&&("input"===g?(o="attr",p="value"):o="text"),o){case"text":null==n?k.text(""):k.text(n);break;case"html":null==n?k.html(""):k.html(n);break;case"class":var o=c(d,G),q=(p=null==o)?"":" ",r=!1;n&&(r=!RegExp("\\s"+n+"\\s").test(" "+o+" ")),k[0].className=(p?"":o)+(r?q+n:"");break;case"attr":p||b(K),"input"===g&&"value"===p?null==n?k.val(""):k.val(n):null==n?k.removeAttr(p):k.attr(p,n);break;case"style":p||b(K),null==n?k.css(p,""):k.css(p,n);break;default:b(L)}}}function p(a,b,c){for(var d=0,e=c.length;e>d;d++){var f=c[d];b.removeChild(f),a._removeBinding(f)}}function q(a){for(var a=a.childNodes,b=[],c=0,d=a.length;d>c;c++)b.push(y(a[c]));return b}function t(a,b,c,d,e){for(var f=c.ownerDocument.createDocumentFragment(),g=[],h=0,i=e.length;i>h;h++){var j=q(c);g[h]=j;for(var k=0,l=j.length;l>k;k++)f.appendChild(j[k]);m(a,j,e[h])}return Array.prototype[d].apply(b,g),f}function u(a,b,c,d,e,f){var g=d.length;if(0!==g){for(var h=d[0],i=h,c=1===g?c.length:i+d[1];c>i;i++){var j=e[i];j&&p(a,b,j)}if(e.splice(h,d[1]),!(2>=g)){for(i=e.length,i=0===i||0===h?b.firstChild:h>=i?null:e[h][0],c=f.ownerDocument.createDocumentFragment(),h=[h,0],j=2;g>j;j++){for(var k=q(f),l=0,n=k.length;n>l;l++)c.appendChild(k[l]);m(a,k,d[j]),h.push(k)}b.insertBefore(c,i),Array.prototype.splice.apply(e,h)}}}function v(a,b){void 0!==a.nodeType?a.nodeType===x&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=e(a)),this._bindRootId=P++,Q[this._bindRootId]=this;for(var d=[],g=0,h=this._targets.length;h>g;g++){var i=this._targets[g];if(i.nodeType===x){i.setAttribute(F,this._bindRootId);for(var j=f(i,[B,C],void 0,!0),k=0,l=j.length;l>k;k++){var n=N++;j[k].setAttribute(D,n)}for(j=f(i,A,void 0,!0),k=0,l=j.length;l>k;k++)n=j[k],/class\s*:/.test(c(n,A))&&""!=n.className&&n.setAttribute(G,n.className)}d.push(i.cloneNode(!0))}this._srces=d,this._loopElementsMap={},this._rootContext=b,this._usingContexts=[],this._srcToViewMap={},this._listeners={},m(this,this._targets,this._rootContext,!1,!0)}var y,A="data-h5-bind",B="data-h5-context",C="data-h5-loop-context",D="data-h5-dyn-ctx",E="data-h5-dyn-vid",F="data-h5-dyn-bind-root",G="data-h5-dyn-cn",H=":",I=";",J=/\(\s*(\S+)\s*\)/,K=7100,L=7101,M=7102,N=0,O=0,P=0,Q={},R={};!function(){var b=document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),d=void 0!==c.h5Dummy;b.h5Dummy=void 0,d?(c.h5Dummy=void 0,y=function(b){var c=b.ownerDocument;return b.nodeType===x?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):y=function(a){return a.cloneNode(!0)}}(),a.extend(v.prototype,{unbind:function(){for(var a=0,b=this._targets.length;b>a;a++){var c=this._targets[a];if(c.nodeType===x){this._removeBinding(c),c.removeAttribute(F);for(var d=f(c,G,void 0,!0),e=0,g=d.length;g>e;e++)d[e].removeAttribute(G);for(c=f(c,D,void 0,!0),e=0,d=c.length;d>e;e++)c[e].removeAttribute(D)}}delete Q[this._bindRootId]},_observableArray_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b)for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=this._getSrcCtxNode(c(e,D)),g=this._loopElementsMap[d];switch(a.method){case"set":u(this,e,a.target,[a.args[0],1,a.args[1]],g,f);break;case"shift":case"pop":var h=g[a.method]();h&&p(this,e,h);break;case"unshift":h=t(this,g,f,a.method,a.args),e.insertBefore(h,e.firstChild);break;case"push":h=t(this,g,f,a.method,a.args),e.appendChild(h);break;case"splice":u(this,e,a.target,a.args,g,f);break;case"reverse":for(var h=e,i=g;h.firstChild;)h.removeChild(h.firstChild);for(var j=0,e=i.length;e>j;j++)for(var f=i[j],k=f.length-1;k>=0;k--)h.insertBefore(f[k],h.firstChild);g.reverse();break;case"sort":case"copyFrom":case null:for(var h=this._loopElementsMap,i=d,j=a.target,k=g,g=f,f=0,l=k.length;l>f;f++)p(this,e,k[f]);for(var k=e.ownerDocument.createDocumentFragment(),l=[],f=0,n=j.length;n>f;f++){var o=q(g);l[f]=o;for(var r=0,s=o.length;s>r;r++)k.appendChild(o[r]);m(this,o,j.get(f))}e.appendChild(k),h[i]=l}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var d=!1;a.target===this._rootContext&&(d=!0);var e,f=this;for(e in b)if(b.hasOwnProperty(e)){var g=b[e];h(g,d).each(function(){o(this,a.target,!0)}),i(g,B).each(function(){var b=c(this,B);if(!(b in a.props))return!0;f._removeBinding(this);var d=c(this,D),d=f._getSrcCtxNode(d),d=y(d);this.parentNode.replaceChild(d,this),m(f,d,a.props[b].newValue)}),i(g,C).each(function(){var b=c(this,C);return b in a.props&&!a.target._isArrayProp(b)?(f._removeBinding(this),void m(f,this,a.props[b].newValue,!0)):!0})}}},_getSrcCtxNode:function(a){for(var b=0,d=this._srces.length;d>b;b++){var e=this._srces[b];if(c(e,D)===a)return e;if(e=f(e,D,a),0<e.length)return e[0]}return null},_isWatching:function(a){return a=this._getContextIndex(a),-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1),R[c]=a,(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=R[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var d=this._srcToViewMap[c];d&&d[a]&&(delete d[a],this._hasBindingForSrc(d)||(d=!1,j(b)?(b.removeEventListener("change",this._listeners[c]),d=!0):r.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[c]),d=!0),d&&delete this._listeners[c],delete this._srcToViewMap[c],this._usingContexts[c]=null))}R[a]&&delete R[a]}},_removeBinding:function(a){if(a.nodeType===x){var b=c(a,E);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(E));for(var a=f(a,E),b=0,d=a.length;d>b;b++){var e=a[b];this._removeBindingEntry(c(e,E)),e.removeAttribute(E)}}},_getViewsFromSrc:function(a){return a=this._getContextIndex(a),-1===a?null:this._srcToViewMap[a]}}),s={createBinding:function(a,b){return new v(a,b)}}}(),function(){function d(b){return r.u.obj.isJQueryObject(b)?b:a(b)}function g(){this.__cachedTemplates={}}var h="[",i=7001,j=7002,k=7003,l=7010,m=7011,n=r.async.deferred,o={escapeHtml:function(a){return r.u.str.escapeHtml(a)}},p={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a,b,c){this.cacheUrls.length>=this.MAX_CACHE&&this.deleteCache(this.cacheUrls[0]),this.cache[a]={},this.cache[a].templates=b,this.cache[a].path=c,this.cacheUrls.push(a)},deleteCache:function(a,b){b||delete this.cache[a];for(var c=0,d=this.cacheUrls.length;d>c;c++)if(this.cacheUrls[c]===a){this.cacheUrls.splice(c,1);break}},getTemplateByUrls:function(d){function f(c){if(0!==c.length){var d={},e=[];return c.each(function(){var c=a.trim(this.id),f=a.trim(this.innerHTML);c||b(j,null,{});try{var g=new EJS.Compiler(f,h);g.compile(),d[c]=g.process,e.push(c)}catch(i){f=i.lineNumber,b(l,[f?" line:"+f:"",i.message],{id:c,error:i,lineNo:f})}}),{compiled:d,data:{ids:e}}}}function g(b,d,e){r.ajax(d,{dataType:"text"}).done(function(d,g,h){if(delete s.accessingUrls[b],d=a(h.responseText).filter(function(){return this.tagName&&-1===this.tagName.indexOf("/")&&8!==this.nodeType}),g=this.url,0<d.not('script[type="text/ejs"]').length)e.reject(c(m,null,{url:b,path:g}));else{h=null;try{h=f(d.filter('script[type="text/ejs"]'))}catch(j){return j.detail.url=b,j.detail.path=g,void e.reject(j)}var k,l;try{var n=h.compiled;l=h.data,l.path=g,l.absoluteUrl=b,k=n,s.append(b,n,g)}catch(o){return void e.reject(c(i,null,{error:o,url:b,path:g}))}e.resolve({ret:k,data:l})}}).fail(function(a){delete s.accessingUrls[b],e.reject(c(k,[a.status,b],{url:b,path:d,error:a}))})}for(var o={},p=[],q=[],s=this,t=function(a){var b=s.cache[a].templates;return s.deleteCache(a,!0),s.cacheUrls.push(a),b},u=0;u<d.length;u++){var v=d[u],w=e(v);if(this.cache[w])a.extend(o,t(w)),q.push({absoluteUrl:w});else if(this.accessingUrls[w])p.push(this.accessingUrls[w]);else{var x=r.async.deferred();p.push(this.accessingUrls[w]=x.promise()),g(w,v,x)}}var y=n();return r.async.when(p).done(function(){for(var b=r.u.obj.argsToArray(arguments),c=0,d=b.length;d>c;c++)a.extend(o,b[c].ret),q.push(b[c].data);y.resolve(o,q)}).fail(function(a){y.reject(a)}),y.promise()}};a.extend(g.prototype,{load:function(c){var d=n(),e=this,g=null;switch(a.type(c)){case"string":a.trim(c)||b(7004),g=[c];break;case"array":g=c,0===g.length&&b(7004);for(var c=0,h=g.length;h>c;c++)f(g[c])?a.trim(g[c])||b(7004):b(7004);break;default:b(7004)}return p.getTemplateByUrls(g).done(function(b,c){a.extend(e.__cachedTemplates,b),d.resolve(c)}).fail(function(a){d.reject(a)}),d.promise()},getAvailableTemplates:function(){var a,b=[];for(a in this.__cachedTemplates)b.push(a);return b},register:function(c,d){"string"!==a.type(d)?b(7e3,null,{id:c}):(!f(c)||!a.trim(c))&&b(j,[]);try{var e=new EJS.Compiler(d,h);e.compile(),this.__cachedTemplates[c]=e.process}catch(g){e=g.lineNumber,b(l,[e?" line:"+e:"",g.message],{id:c})}},isValid:function(a){try{return new EJS.Compiler(a,h).compile(),!0}catch(b){return!1}},get:function(c,d){var e=this.__cachedTemplates;(!f(c)||!a.trim(c))&&b(j),(e=e[c])||b(7005,c);var g=d?a.extend(!0,{},d):{},h=g.hasOwnProperty("_h")?new EJS.Helpers(g):new EJS.Helpers(g,{_h:o}),i=null;try{i=e.call(g,g,h)}catch(k){b(7006,k.toString(),k)}return i},update:function(a,b,c){return d(a).html(this.get(b,c))},append:function(a,b,c){return d(a).append(this.get(b,c))},prepend:function(a,b,c){return d(a).prepend(this.get(b,c))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(c){if(typeof c===w)this.__cachedTemplates={};else{var d=null;switch(a.type(c)){case"string":d=[c];break;case"array":c.length||b(j),d=c;break;default:b(j)}for(var c=0,e=d.length;e>c;c++){var g=d[c];(!f(g)||!a.trim(g))&&b(j)}for(c=0,e=d.length;e>c;c++)delete this.__cachedTemplates[d[c]]}},bind:function(c,d){var e=null;return null==c&&b(7007),z(c)?e=c:(e=a(c),0===e.length&&b(7007),e=e.toArray()),(null==d||"object"!=typeof d||z(d)||r.core.data.isObservableArray(d))&&b(7009),s.createBinding(e,d)}});var q=new g;q.createView=function(){return new g},a(function(){a('script[type="text/ejs"]').each(function(){var b=a.trim(this.id),c=a.trim(this.innerHTML);0!==c.length&&b&&(c=new EJS.Compiler(c,h),c.compile(),q.__cachedTemplates[b]=c.process)})}),r.u.obj.expose("h5.core",{view:q})}(),function(){function b(b){var c,d={};for(c in R){var e=a("<div></div>").addClass(b).addClass(c).appendTo("body"),f=a.camelCase(c);d[f]={},a.map(R[c],function(a){d[f][a]="width"===a||"height"===a?parseInt(e.css(a).replace(/\D/g,""),10):e.css(a)}),e.remove()}return d}function c(a,b,c){var d,a=b.createElement("v:"+a);for(d in c)a.style[d]=c[d];return a}function d(a,b){for(var c=[],d=a/2,e=.8*a/2,f=360/b*Math.PI/180,g=1;b>=g;g++){var h=f*g,i=Math.cos(h),h=Math.sin(h);c.push({from:{x:d+e/2*i,y:d+e/2*h},to:{x:d+e*i,y:d+e*h}})}return c}function e(a){return function(){var b=document.body,c=document.documentElement,d=U?b:V?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function g(a){return function(){var b=U?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function h(a){var b=U?document.body:document.documentElement;return O.isiOS?window["inner"+a]:b["client"+a]}function i(b){var c=a(b)[0],d=document.body,e=a("html")[0],b={top:0,left:0};return c===d&&V?{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)}:("undefined"!=typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect()),d=U?d:document.documentElement,c=d.clientTop||0,d=d.clientLeft||0,{top:b.top+_()-c,left:b.left+aa()-d})}function j(){a.each(Q(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function l(a){return a=P(a)?a[0]:a,a===window||a===document||a===document.body}function m(a){return o(n(a)).getComputedStyle(a,null)}function p(b,c){return o(n(b)).getComputedStyle?m(b)[c]:a(b).css(c)}function q(b){if(!o(n(b)).getComputedStyle)return a(b).height();var c=m(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function s(b){if(!o(n(b)).getComputedStyle)return a(b).width();var c=m(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function t(b,c){if(!o(n(b)).getComputedStyle)return a(b).outerHeight();var d=m(b);return q(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function u(b,c){if(!o(n(b)).getComputedStyle)return a(b).outerWidth();var d=m(b);return s(b)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)+parseFloat(d.borderLeftWidth)+parseFloat(d.borderRightWidth)+(c?parseFloat(d.marginLeft)+parseFloat(d.marginRight):0)}function v(b){if(!o(n(b)).getComputedStyle)return a(b).innerHeight();var c=m(b);return q(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function x(b){if(!o(n(b)).getComputedStyle)return a(b).innerWidth();var c=m(b);return s(b)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)}function y(b,c,d,e){function f(){h+=g,h>d?(clearInterval(k),c.each(function(a){for(var c in b[a])this.style[c]=""}),e()):c.each(function(b){var c,d=i[b];for(c in d)d[c]+=j[b][c];a(this).css(d)})}var g=N,h=0,i=[],j=[];c.each(function(a){var e=b[a];j[a]={},i[a]={};var f,h=m(c[a]);for(f in e)i[a][f]=parseFloat(h[f]),j[a][f]=(parseFloat(e[f])-parseFloat(h[f]))*g/d}),f();var k=setInterval(f,g)}function B(a,b,c){var d=[];a.each(function(){var a=parseFloat(p(this,"opacity"));d.push({opacity:a})}),a.css({opacity:0,display:"block"}),y(d,a,b,c)}function C(a,b,c){var d=[];a.each(function(){d.push({opacity:0})}),y(d,a,b,c)}function D(b,e){if(this.style=a.extend(!0,{},b),!e.getElementById(K)){e.namespaces.add("v","urn:schemas-microsoft-com:vml");var f=e.createElement("style");e.getElementsByTagName("head")[0].appendChild(f),f.id=K,f.setAttribute("type","text/css"),f.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}f=this.style.throbber.width,this.group=c("group",e,{width:f+"px",height:this.style.throbber.height+"px"}),this.group.className=J;for(var f=d(f,this.style.throbber.lines),g=this.style.throbberLine.color,h=this.style.throbberLine.width,i=0,j=f.length;j>i;i++){var k=f[i],l=k.from,m=k.to,k=c("line",e);k.strokeweight=h,k.strokecolor=g,k.fillcolor=g,k.from=l.x+","+l.y,k.to=m.x+","+m.y,l=c("stroke",e),l.opacity=1,k.appendChild(l),this.group.appendChild(k)}this._createPercentArea(e)}function E(c,d){var e=this,f=a(c);if(f.length){var g=l(f),f=g?a("body"):f,h=n(f[0]);h===window.document||f[0]!==h&&o(h)!==f[0]||(f=a(h.body));var i=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a"},d);this._displayed=!1,this._throbbers=[],this._settings=i,this._styles=a.extend(!0,{},{throbber:{roundTime:1e3,lines:12},throbberLine:{},percent:{}},b(i.theme)),i.throbber&&a.extend(this._styles.throbber,i.throbber),this._isScreenLock=g,this._$target=f,this._target=1===this._$target.length?this._$target[0]:this._$target.toArray(),this._scrollEventTimerId=null,this._scrollHandler=function(){e._handleScrollEvent()},this._resizeEventTimerId=null,this._resizeHandler=function(){e._handleResizeEvent()},this._redrawable=!0,this._lastPercent=-1,this._lastMessage=null,this._fadeInTime="number"==typeof i.fadeIn?i.fadeIn:-1,this._fadeOutTime="number"==typeof i.fadeOut?i.fadeOut:-1,this._$content=a(),this._$overlay=a(),this._$skin=a();for(var f=r.u.str.format(L,""===i.message?'style="display: none;"':"",i.message),g="https"===document.location.protocol?"return:false":"about:blank",j=0,m=this._$target.length;m>j;j++)this._$content=this._$content.add(a(h.createElement("div")).append(f).addClass(F).addClass(i.theme).addClass(G).css("display","none")),this._$overlay=this._$overlay.add((i.block?a(h.createElement("div")):a()).addClass(F).addClass(i.theme).addClass(H).css("display","none")),this._$skin=this._$skin.add((V||U?a(h.createElement("iframe")):a()).attr("src",g).addClass(F).addClass(I).css("display","none"));var p=this._isScreenLock&&W?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",p)}),h=i.promises,i=function(){e.hide()},f=a.hasOwnProperty("curCSS")?"pipe":"then",z(h)?(h=a.map(h,function(a){return a&&A(a.promise)?a:null}),0<h.length&&k(r.async.when(h),f,[i,i])):h&&A(h.promise)&&k(h,f,[i,i])}}var F="h5-indicator",G="content",H="overlay",I="skin",J="vml-root",K="h5-vmlstyle",L='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',M=500,N=13,O=r.env.ua,P=r.u.obj.isJQueryObject,Q=r.u.obj.argsToArray,R={throbber:["width","height"],"throbber-line":["width","color"]},S=!!document.createElement("canvas").getContext,T=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));return a.innerHTML='<v:line strokeweight="1"/>',a=a.firstChild,a.style.behavior="url(#default#VML)","number"==typeof a.strokeweight}(),U="CSS1Compat"!==document.compatMode,V=O.isIE&&6>=O.browserVersion,W=!(O.isAndroidDefaultBrowser||O.isiOS&&5>O.browserVersion||V||U||O.isWindowsPhone),X=null,Y=null,Z=null,$=null,_=null,aa=null,ba=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(e){if(e=a.camelCase(e),e in b.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),f=0;d>f;f++)if(c[f]+e in b.style)return!0;return!1}}(),Y=function(a){return function(){var b=document.body,c=document.documentElement;return"number"==typeof window["inner"+a]?window["inner"+a]:U?b["client"+a]:c["client"+a]}}("Height"),Z=e("Height"),$=e("Width"),_=g("Top"),aa=g("Left"),X=ba("animationName");D.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="",this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,d=this.group.childNodes,e=0,f=d.length;f>e;e++){var g=d[e];if("textbox"!==g.nodeName){var h=e+1;g.firstChild.opacity=h==c?"1":h==c+1||h==c-1?"0.75":"0.4"}}c==a?c=0:c++,this.highlightPos=c;var i=this;this._runId=setTimeout(function(){i._run.call(i)},Math.floor(b/a))}},_createPercentArea:function(b){var d=c("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var e=b.find("td");e.width(this.group.style.width),e.height(this.group.style.height),e.css("line-height",this.group.style.height),e.addClass("throbber-percent"),d.appendChild(b[0]),this.group.appendChild(d)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var ca=function(b,c){this.style=a.extend(!0,{},b),this.canvas=c.createElement("canvas"),this.baseDiv=c.createElement("div"),this.percentDiv=c.createElement("div");var e=this.canvas,f=this.baseDiv,g=this.percentDiv;e.width=this.style.throbber.width,e.height=this.style.throbber.height,e.style.display="block",e.style.position="absolute",f.style.width=this.style.throbber.width+"px",f.style.height=this.style.throbber.height+"px",f.appendChild(e),g.style.width=this.style.throbber.width+"px",g.style.height=this.style.throbber.height+"px",g.style.lineHeight=this.style.throbber.height+"px",g.className="throbber-percent",f.appendChild(g),this.positions=d(e.width,this.style.throbber.lines)};ca.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove(),this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,e=this.positions,f=this.style.throbberLine.color,g=this.style.throbberLine.width,h=this.style.throbber.roundTime;b.width=b.width;for(var i=0,j=e.length;j>i;i++){c.beginPath(),c.strokeStyle=f,c.lineWidth=g;var k=i+1;c.globalAlpha=k==d?1:k==d+1||k==d-1?.75:.4;var l=e[i],k=l.from,l=l.to;c.moveTo(k.x,k.y),c.lineTo(l.x,l.y),c.stroke()}if(d==a?d=0:d++,this.highlightPos=d,X)b.className="throbber-canvas";else{var m=this;this._runId=setTimeout(function(){m._run.call(m)},Math.floor(h/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}},E.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+F).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,d=function(){var c=a(window);b._isScreenLock&&(j(b._$overlay,b._$content),W||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",b._scrollHandler))),c.bind("orientationchange",b._resizeHandler),c.bind("resize",b._resizeHandler)},e=0,f=this._$target.length;f>e;e++){var g=this._$target.eq(e),h=this._$content.eq(e),i=this._$skin.eq(e),k=this._$overlay.eq(e),l=p(g[0],"position");!this._isScreenLock&&"static"===l&&(g.data("before-position",l),g.data("before-zoom",p(g[0],"zoom")),g.css({position:"relative",zoom:"1"})),l=n(g[0]),(l=S?new ca(this._styles,l):T?new D(this._styles,l):null)&&(b._throbbers.push(l),b.percent(this._settings.percent),l.show(h.children(".indicator-throbber")[0])),g.append(i).append(k).append(h)}return e=this._$skin.toArray(),Array.prototype.push.apply(e,this._$content.toArray()),Array.prototype.push.apply(e,this._$overlay.toArray()),e=a(e),0>c?(e.css("display","block"),d()):B(e,c,d),this._reposition(),this._resizeOverlay(),this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&W||0===this._$overlay.length))for(var c=0,d=this._$target.length;d>c;c++){var e=this._$content.eq(c),f=this._$overlay.eq(c);b=this._$target.eq(c);var g=this._$skin.eq(c);if(this._isScreenLock)e=$(),b=Z();else{f.css("display","none"),e.css("display","none");var h=b[0];if(a=h.scrollWidth,b=h.scrollHeight,V)a=Math.max(a,h.clientWidth),b=Math.max(b,h.clientHeight);else if(O.isIE&&"function"==typeof getComputedStyle){var h=o(n(h)).getComputedStyle(h,null),i=parseFloat(h.width)+parseFloat(h.paddingLeft)+parseFloat(h.paddingRight);a+=i-parseInt(i)-1,h=parseFloat(h.height)+parseFloat(h.paddingTop)+parseFloat(h.paddingBottom),b+=h-parseInt(h)-1}f.css("display","block"),e.css("display","block"),e=a}f[0].style.width=e+"px",f[0].style.height=b+"px",(V||U)&&(g[0].style.width=e+"px",g[0].style.height=b+"px")}},_reposition:function(){for(var b=0,c=this._$target.length;c>b;b++){var d=this._$target.eq(b),e=this._$content.eq(b);if(this._isScreenLock){var f=Y();W?e.css("top",(f-t(e[0]))/2+"px"):e.css("top",_()+f/2-t(e[0])/2+"px")}else e.css("top",d.scrollTop()+(v(d[0])-t(e[0]))/2);var f=x(e[0])-s(e[0]),g=0;e.children().each(function(){var b=a(this);return"none"===p(b[0],"display")?!0:void(g+=u(this,!0))}),e.css("width",g+f),e.css("left",d.scrollLeft()+(x(d[0])-u(e[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray()),
Array.prototype.push.apply(d,this._$overlay.toArray());for(var e=a(d),d=function(){var c=a(window);e.remove(),b._isScreenLock||b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")}),d.removeData("before-position").removeData("before-zoom")}),c.unbind("touchmove",b._scrollHandler),c.unbind("scroll",b._scrollHandler),c.unbind("orientationchange",b._resizeHandler),c.unbind("resize",b._resizeHandler),b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId),b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},f=0,g=this._throbbers.length;g>f;f++)this._throbbers[f].hide();return 0>c?(e.css("display","none"),d()):C(e,c,d),this},percent:function(a){if("number"!=typeof a||!(a>=0&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;c>b;b++)this._throbbers[b].setPercent(a);return this},message:function(a){return f(a)?this._redrawable?(this._$content.children(".indicator-message").css("display","inline-block").text(a),this._reposition(),this):(this._lastMessage=a,this):this},_handleScrollEvent:function(){if(this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId),this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition(),a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay(),b._reposition(),b._redrawable=!0,b.percent(b._lastPercent),b.message(b._lastMessage),b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId),this._redrawable=!1,W||V||U?a():this._resizeEventTimerId=setTimeout(function(){a()},1e3)}},r.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new E(b.target,b):new E(b,c)},isInView:function(b,c){var d,e,f,g,j=a(b);if(typeof c===w)e=h("Height"),g=h("Width"),d=_(),f=aa();else{if(g=a(c),0===g.find(j).length)return;f=i(g),d=f.top+parseInt(g.css("border-top-width")),f=f.left+parseInt(g.css("border-left-width")),e=g.innerHeight(),g=g.innerWidth()}e=d+e,g=f+g;var k=i(j),l=k.top,k=k.left,m=l+j.outerHeight(),j=k+j.outerWidth();return(l>=d&&e>l||m>d&&e>=m)&&(k>=f&&g>k||j>f&&g>=j)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0),c>0&&(window.scrollTo(0,1),c--,setTimeout(b,M))}var c=3;window.scrollTo(0,1),1!==a(window).scrollTop()&&setTimeout(b,M)}})}(),function(){function c(){var b=a.mobile.activePage,b=b&&b[0]&&b[0].id;return f(b)&&0<b.length?b:null}function d(){var b=c();null!==b&&a(function(){i.addCSS(b),i.bindController(b)})}function e(a,b){for(var c in k)for(var d=k[c],e=a===c,f=0,g=d.length;g>f;f++){var h=d[f];e&&h[(b?"enable":"disable")+"Listeners"]()}for(c in l)for(d=l[c],e=a===c,f=0,g=d.length;g>f;f++)h=d[f],e&&h[(b?"enable":"disable")+"Listeners"]()}function g(a,b){if(a=a.replace(/(\.0+)+$/,""),b=b.replace(/(\.0+)+$/,""),a===b)return 0;for(var c=a.split("."),d=b.split("."),e=c.length,f=0;e>f;f++){if(null==d[f])return 1;var g=parseInt(c[f],10),h=parseInt(d[f],10);if(g!==h)return h>g?-1:1}return null!=d[e]?-1:0}var h,i=null,j={},k={},l={},m={},n={},o=!1,p=!1,q=!1;r.u.obj.ns("h5.ui.jqm"),r.ui.jqm.dataPrefix="h5";var s={__name:"JQMController",__ready:function(){var b=this,d=c();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){b.loadScript(this.id)});var e=this.$find("#"+d);e.one("h5controllerready.emulatepageshow",function(){q&&e[0]===a.mobile.activePage[0]&&e.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){h||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){h&&this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a),this.addCSS(a),this.bindController(a)},"{rootElement} pageremove":function(b){a(b.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage}),p=!0;var b=b.event.target.id,c=k[b],d=l[b];if(c){for(var e=0,f=c.length;f>e;e++)c[e].dispose();k[b]=[]}if(d){for(e=0,f=d.length;f>e;e++)d[e].dispose();l[b]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id,this.addCSS(a),e(a,!0)},"{rootElement} pagehide":function(b){p||a(b.event.target).trigger("h5jqmpagehide",{nextPage:b.evArg.nextPage}),p=!1,b=b.event.target.id,e(b,!1),this.removeCSS(b)},"{rootElement} pageshow":function(b){var c=!1,d=a(b.event.target),e=b.evArg?b.evArg.prevPage:a("");if(b=k[d[0].id])for(var f=0,g=b.length;g>f;f++)if(!b[f].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",{prevPage:e})}),c=!0;break}c||d.trigger("h5jqmpageshow",{prevPage:e})},"{rootElement} h5controllerbound":function(b){if(b=b.evArg,this!==b){var d=c();null===d||-1!==a.inArray(b,k[d])||(l[d]||(l[d]=[]),l[d].push(b))}},"{rootElement} h5controllerunbound":function(b){var d=b.evArg,b=c();null!==b&&(d=a.inArray(d,l[b]),-1!==d&&l[b].splice(d,1))},loadScript:function(b){var b=a("#"+b),c=a.trim(b.data(this.getDataAttribute("script")));return 0!==c.length?(c=a.map(c.split(","),function(b){return a.trim(b)}),b=1==b.data(this.getDataAttribute("async")),r.u.loadScript(c,{async:b})):void 0},getDataAttribute:function(a){var b=r.ui.jqm.dataPrefix;return null==b&&(b="h5"),0!==b.length?b+"-"+a:a},bindController:function(a){var b=j[a],c=m[a];if(b&&0!==b.length){k[a]||(k[a]=[]);for(var d=k[a],e=0,f=b.length;f>e;e++){for(var g=b[e],h=!1,i=0,l=d.length;l>i;i++){var n=d[i];if(n&&n.__name===g.__name){h=!0;break}}h||k[a].push(r.core.controller("#"+a,g,c[e]))}}},addCSS:function(b){if(b=n[b])for(var c=document.getElementsByTagName("head")[0],d=c.getElementsByTagName("link"),e=d.length,f=0,g=b.length;g>f;f++){for(var h=a.mobile.path.parseUrl(b[f]).filename,i=!1,j=0;e>j;j++)if(a.mobile.path.parseUrl(d[j].href).filename===h){i=!0;break}i||(h=document.createElement("link"),h.type="text/css",h.rel="stylesheet",h.href=b[f],c.appendChild(h))}},removeCSS:function(b){var d=n[b];if(d&&(b=c(),null!==b)){var e=n[b];a("link").filter(function(){var b=a(this).attr("href");return-1!==a.inArray(b,d)&&-1===a.inArray(b,e)}).remove()}}};r.u.obj.expose("h5.ui.jqm.manager",{init:function(){o||(o=!0,h=0<=g(a.mobile.version,"1.4"),a(document).one("pageshow",function(){q=!0}),a(function(){i=B.controllerInternal("body",s,null,{managed:!1}),d()}))},define:function(e,g,h,i){f(e)||b(12e3,"id"),null!=g&&!f(g)&&!z(g)&&b(12e3,"cssSrc"),null!=h&&((f(h)||z(h))&&b(12001),!(a.isPlainObject(h)&&"__name"in h||!b(12e3,"controllerDefObject")),null!=i&&!a.isPlainObject(i)&&b(12e3,"initParam")),n[e]||(n[e]=[]),j[e]||(j[e]=[]),m[e]||(m[e]=[]),a.merge(n[e],a.map(a.makeArray(g),function(b){return-1!==a.inArray(b,n[e])?null:b})),h&&-1===a.inArray(h,j[e])&&(j[e].push(h),m[e].push(i)),o&&null!==c()?d():this.init()}})}(),function(){function d(){return g||(g=navigator.geolocation),g}function e(a,b){this.oblateness=a,this.semiMajorAxis=b}function f(){}var g=null,h=r.env.ua;e.prototype.getOblateness=function(){return this.oblateness},e.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var i=new e(298.257222,6378137),j=new e(299.152813,6377397.155),k=Math.PI/180;a.extend(f.prototype,{isSupported:h.isIE&&9<=h.browserVersion?!0:!!d(),getCurrentPosition:function(a){var b=r.async.deferred();return d().getCurrentPosition(function(a){b.resolve(a)},function(a){b.reject(c(2002,null,a))},a),b.promise()},watchPosition:function(a){function b(){}var e=r.async.deferred(),f=d().watchPosition(function(a){e.notify(a)},function(a){d().clearWatch(f),e.reject(c(2002,null,a))},a);return b.prototype.unwatch=function(){d().clearWatch(f),e.resolve()},e.promise(new b)},getDistance:function(a,c,d,f,g){!(isFinite(a)&&isFinite(c)&&isFinite(d)&&isFinite(f)||!b(2e3));var h=g?g:i;h instanceof e||b(2001);var g=h.getSemiMajorAxis(),j=h.getOblateness(),a=a*k,c=c*k,d=d*k,h=f*k,f=(a+d)/2,j=Math.sqrt(2*j-1)/j,j=Math.pow(j,2),l=Math.sqrt(1-j*Math.pow(Math.sin(f),2)),j=g*(1-j)/Math.pow(l,3),g=g/l,c=c-h;return Math.sqrt(Math.pow(j*(a-d),2)+Math.pow(g*Math.cos(f)*c,2))},GS_GRS80:i,GS_BESSEL:j}),r.u.obj.expose("h5.api",{geo:new f})}(),function(){function e(a){if(a){var c=a.deferred;(g(c)||h(c)||!a.result)&&b(u)}}function i(c,d,e){if(a.isPlainObject(c))for(var f in c){var g=a.trim(f).replace(/ +/g," ").split(" "),h=[];""===g[0]?b(w):1===g.length?(h.push(g[0]),h.push("="),h.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(g[1])?3===g.length&&/^like$/i.test(g[1])?(h.push(g[0]),h.push(g[1]),h.push("?"),h.push("ESCAPE"),h.push('"'+g[2]+'"')):(h.push(g[0]),h.push(g[1]),h.push("?")):b(v),d.push(h.join(" ")),e.push(c[f])}}function j(){}function k(){this._multiple=!1}function m(a){this._db=a,this._df=x(),this._tx=null,this._tasks=[],this._queue=[]}function n(a,b,c){this._statements=[],this._parameters=[],this._executor=a,this._tableName=b,this._columns=z(c)?c.join(", "):"*",this._orderBy=this._where=null}function o(a,b,c){this._statements=[],this._parameters=[],this._executor=a,this._tableName=b,this._values=c?d(c):[],this._df=x(),this._multiple=!0}function p(a,b,c){this._statements=[],this._parameters=[],this._executor=a,this._tableName=b,this._values=c,this._where=null}function q(a,b){this._statements=[],this._parameters=[],this._executor=a,this._tableName=b,this._where=null}function s(a,b,c){this._statements=[],this._parameters=[],this._executor=a,this._statements.push(b),this._parameters.push(c||[])}function t(a){this._db=a}var u=3e3,v=3003,w=3011,x=r.async.deferred,y=r.u.str.format;a.extend(k.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}}),a.extend(m.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof k||b(3009);var c=this._getRecentTask();return(!c||c.result)&&this._queue.push(a),this},_execute:function(a){function b(){if(0===g.length){var c=a(h);d._setResult.apply(d,[c]),f.notify(c,d)}else{for(var e=g.shift(),i=e._statements,j=e._parameters,k=x().resolve().promise(),c=[],m=0,n=i.length;n>m;m++)(function(a,b){k=l(k,function(){var f=x();return d._tx.executeSql(a,b,function(a,b){c.push(e._onComplete(b)),f.resolve()}),f.promise()})})(i[m],j[m]);l(k,function(){h.push(e._multiple?c:c[0]),b()})}}var d=this,f=this._df,g=this._queue,h=[];try{e(this._getRecentTask()),this._addTask(f);for(var i=0,j=g.length;j>i;i++)g[i]._buildStatementAndParameters();this._runTransaction()?b():this._db.transaction(function(a){d._tx=a,b()},function(a){d._tx=null;for(var b=d._tasks,e=b.length-1;e>=0;e--)b[e].deferred.reject(c(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,b=a.length-1;b>=0;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(k){f.reject(k)}return this._df=x(),f.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}}),n.prototype=new k,a.extend(n.prototype,{where:function(c){return!a.isPlainObject(c)&&!f(c)&&b(3004,["Select","where"]),this._where=c,this},orderBy:function(c){return!a.isPlainObject(c)&&!f(c)&&b(3004,["Select","orderBy"]),this._orderBy=d(c),this},_buildStatementAndParameters:function(){var b="",c=this._where,b=y("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(c)){var d=[];i(c,d,this._parameters),b+=" WHERE "+d.join(" AND ")}else f(c)&&(b+=" WHERE "+c);z(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", ")),this._statements.push([b]),this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}}),o.prototype=new k,a.extend(o.prototype,{_buildStatementAndParameters:function(){var b=this._values,c=this._statements,d=this._parameters;if(0===b.length)c.push(y("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else for(var e=0,f=b.length;f>e;e++){var g=b[e];if(null==g)c.push(y("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else if(a.isPlainObject(g)){var h,i=[],j=[],k=[];for(h in g)i.push("?"),j.push(h),k.push(g[h]);c.push(y("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,j.join(", "),i.join(", "))),d.push(k)}}},_onComplete:function(a){return a.insertId}}),p.prototype=new k,a.extend(p.prototype,{where:function(c){return!a.isPlainObject(c)&&!f(c)&&b(3004,["Update","where"]),this._where=c,this},_buildStatementAndParameters:function(){var b,c="",d=this._where,c=this._values,e=[];for(b in c)e.push(b+" = ?"),this._parameters.push(c[b]);c=y("UPDATE {0} SET {1}",this._tableName,e.join(", ")),a.isPlainObject(d)?(b=[],i(d,b,this._parameters),c+=" WHERE "+b.join(" AND ")):f(d)&&(c+=" WHERE "+d),this._statements.push([c]),this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}}),q.prototype=new k,a.extend(q.prototype,{where:function(c){return!a.isPlainObject(c)&&!f(c)&&b(3004,["Del","where"]),this._where=c,this},_buildStatementAndParameters:function(){var b="",c=this._where,b=y("DELETE FROM {0}",this._tableName);if(a.isPlainObject(c)){var d=[];i(c,d,this._parameters),b+=" WHERE "+d.join(" AND ")}else f(c)&&(b+=" WHERE "+c);this._statements.push([b]),this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}}),s.prototype=new k,a.extend(s.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}}),a.extend(t.prototype,{select:function(a,c,d){return f(a)||b(3001,"select"),!z(c)&&"*"!==c&&b(3005,"select"),new n(this.transaction(d),a,c)},insert:function(c,d,e){return f(c)||b(3001,"insert"),null!=d&&!z(d)&&!a.isPlainObject(d)&&b(3006,"insert"),new o(this.transaction(e),c,d)},update:function(c,d,e){return f(c)||b(3001,"update"),a.isPlainObject(d)||b(3006,"update"),new p(this.transaction(e),c,d)},del:function(a,c){return f(a)||b(3001,"del"),new q(this.transaction(c),a)},sql:function(a,c,d){return f(a)||b(3007,"sql"),null!=c&&!z(c)&&b(3008,"sql"),new s(this.transaction(d),a,c)},transaction:function(a){return void 0!=a&&!(a instanceof m)&&b(3002,"transaction"),a?a:new m(this._db)}}),a.extend(j.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,d){return this.isSupported?(a=openDatabase(a,b,c,d),new t(a)):void 0}}),r.u.obj.expose("h5.api",{sqldb:new j})}(),function(){function b(a){this._storage=a}a.extend(b.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},getItem:function(a){return a=this._storage.getItem(a),null===a?null:r.u.obj.deserialize(a)},setItem:function(a,b){this._storage.setItem(a,r.u.obj.serialize(b))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var b=this._storage,c=0,d=b.length;d>c;c++){var e=b.key(c);a(c,e,this.getItem(e))}}}),r.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new b(window.localStorage),session:new b(window.sessionStorage)})}()}(jQuery),function(){var h=function(a,b){for(var c,d=b.exec(a),e=[];null!=d;)c=d.index,0!=c&&(a.substring(0,c),e.push(a.substring(0,c)),a=a.slice(c)),e.push(d[0]),a=a.slice(d[0].length),d=b.exec(a);return""==!a&&e.push(a),e},i=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};EJS=function(a){if(a="string"==typeof a?{view:a}:a,this.set_options(a),a.precompiled)this.template={},this.template.process=a.precompiled,EJS.update(this.name,this);else{if(a.element){if("string"==typeof a.element){var b=a.element;if(a.element=document.getElementById(a.element),null==a.element)throw b+"does not exist!"}this.text=a.element.value?a.element.value:a.element.innerHTML,this.name=a.element.id,this.type="["}else if(a.url){a.url=EJS.endExt(a.url,this.extMatch),this.name=this.name?this.name:a.url;var b=a.url,c=EJS.get(this.name,this.cache);if(c)return c;if(c==EJS.INVALID_PATH)return null;try{this.text=EJS.request(b+(this.cache?"":"?"+Math.random()))}catch(d){}if(null==this.text)throw{type:"EJS",message:"There is no template at "+b}}c=new EJS.Compiler(this.text,this.type),c.compile(a,this.name),EJS.update(this.name,this),this.template=c}},EJS.prototype={render:function(a,b){a=a||{},this._extra_helpers=b;var c=new EJS.Helpers(a,b||{});return this.template.process.call(a,a,c)},update:function(a,b){return"string"==typeof a&&(a=document.getElementById(a)),null==b?(_template=this,function(b){EJS.prototype.update.call(_template,a,b)}):void("string"==typeof b?(params={},params.url=b,_template=this,params.onComplete=function(b){b=eval(b.responseText),EJS.prototype.update.call(_template,a,b)},EJS.ajax_request(params)):a.innerHTML=this.render(b))},out:function(){return this.template.out},set_options:function(a){this.type=a.type||EJS.type,this.cache=null!=a.cache?a.cache:EJS.cache,this.text=a.text||null,this.name=a.name||null,this.ext=a.ext||EJS.ext,this.extMatch=RegExp(this.ext.replace(/\./,"."))}},EJS.endExt=function(a,b){return a?(b.lastIndex=0,a+(b.test(a)?"":this.ext)):null},EJS.Scanner=function(a,b,c){i(this,{left_delimiter:b+"%",right_delimiter:"%"+c,double_left:b+"%%",double_right:"%%"+c,left_equal:b+"%=",left_equal_noescape:b+"%:=",left_comment:b+"%#"}),this.SplitRegexp="["==b?/(\[%%)|(%%\])|(\[%=)|(\[%:=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal_noescape+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)"),this.source=a,this.stag=null,this.lines=0},EJS.Scanner.to_text=function(a){return null==a||void 0===a?"":a instanceof Date?a.toDateString():a.toString?a.toString():""},EJS.Scanner.prototype={scan:function(a){var b=this.SplitRegexp;if(""==!this.source)for(var c=h(this.source,/\n/),d=0;d<c.length;d++)this.scanline(c[d],b,a)},scanline:function(a,b,c){for(this.lines++,a=h(a,b),b=0;b<a.length;b++){var d=a[b];if(null!=d)try{c(d,this)}catch(e){throw{type:"EJS.Scanner",line:this.lines}}}}},EJS.Buffer=function(a,b){this.line=[],this.script="",this.pre_cmd=a,this.post_cmd=b;for(var c=0;c<this.pre_cmd.length;c++)this.push(a[c])},EJS.Buffer.prototype={push:function(a){this.line.push(a)},cr:function(){this.script+=this.line.join("; "),this.line=[],this.script+="\n"},close:function(){if(0<this.line.length){for(var a=0;a<this.post_cmd.length;a++)this.push(pre_cmd[a]);this.script+=this.line.join("; "),this.line=null}}},EJS.Compiler=function(a,b){this.pre_cmd=["var ___ViewO = [];"],this.post_cmd=[],this.source=" ",null!=a&&("string"==typeof a?(a=a.replace(/\r\n/g,"\n"),this.source=a=a.replace(/\r/g,"\n")):a.innerHTML&&(this.source=a.innerHTML),"string"!=typeof this.source)&&(this.source="");var b=b||"<",c=">";switch(b){case"[":c="]";break;case"<":break;default:throw b+" is not a supported deliminator"}this.scanner=new EJS.Scanner(this.source,b,c),this.out=""},EJS.Compiler.prototype={compile:function(a,b){a=a||{},this.out="";var c=new EJS.Buffer(this.pre_cmd,this.post_cmd),d="",e=function(a){return a=a.replace(/\\/g,"\\\\"),a=a.replace(/\n/g,"\\n"),a=a.replace(/"/g,'\\"')};this.scanner.scan(function(a,b){if(null==b.stag)switch(a){case"\n":d+="\n",c.push('___ViewO.push("'+e(d)+'");'),c.cr(),d="";break;case b.left_delimiter:case b.left_equal:case b.left_equal_noescape:case b.left_comment:b.stag=a,0<d.length&&c.push('___ViewO.push("'+e(d)+'")'),d="";break;case b.double_left:d+=b.left_delimiter;break;default:d+=a}else switch(a){case b.right_delimiter:switch(b.stag){case b.left_delimiter:"\n"==d[d.length-1]?(d=d.substr(0,d.length-1),c.push(d),c.cr()):c.push(d);break;case b.left_equal_noescape:c.push("___ViewO.push((EJS.Scanner.to_text("+d+")))");break;case b.left_equal:c.push("___ViewO.push((EJS.Scanner.to_text(h5.u.str.escapeHtml("+d+"))))")}b.stag=null,d="";break;case b.double_right:d+=b.right_delimiter;break;default:d+=a}}),0<d.length&&c.push('___ViewO.push("'+e(d)+'")'),c.close(),this.out=c.script+";";var g="/*"+b+"*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(g)}catch(h){if("undefined"==typeof JSLINT)throw h;JSLINT(this.out);for(var f=0;f<JSLINT.errors.length;f++)if(g=JSLINT.errors[f],"Unnecessary semicolon."!=g.reason)throw g.line++,f=Error(),f.lineNumber=g.line,f.message=g.reason,a.view&&(f.fileName=a.view),f}}},EJS.config=function(a){EJS.cache=null!=a.cache?a.cache:EJS.cache,EJS.type=null!=a.type?a.type:EJS.type,EJS.ext=null!=a.ext?a.ext:EJS.ext;var b=EJS.templates_directory||{};EJS.templates_directory=b,EJS.get=function(a,c){return 0==c?null:b[a]?b[a]:null},EJS.update=function(a,c){null!=a&&(b[a]=c)},EJS.INVALID_PATH=-1},EJS.config({cache:!0,type:"<",ext:".ejs"}),EJS.Helpers=function(a,b){this._data=a,this._extras=b,i(this,b)},EJS.Helpers.prototype={view:function(a,b,c){return c||(c=this._extras),b||(b=this._data),new EJS(a).render(b,c)},to_text:function(a,b){return null==a||void 0===a?b||"":a instanceof Date?a.toDateString():a.toString?a.toString().replace(/\n/g,"<br />").replace(/''/g,"'"):""}},EJS.newRequest=function(){for(var a=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0;b<a.length;b++)try{var c=a[b]();if(null!=c)return c}catch(d){}},EJS.request=function(a){var b=new EJS.newRequest;b.open("GET",a,!1);try{b.send(null)}catch(c){return null}return 404==b.status||2==b.status||0==b.status&&""==b.responseText?null:b.responseText},EJS.ajax_request=function(a){a.method=a.method?a.method:"GET";var b=new EJS.newRequest;b.onreadystatechange=function(){4==b.readyState&&a.onComplete(b)},b.open(a.method,a.url),b.send(null)}}(),$(function(){var a={__name:"com.hifive.sample.picopico.PageController",__templates:"dotCanvas.ejs",_mouseDown:!1,_CELLWIDTH:10,_WHITE:"#B2EBF2",_BLACK:"#263238",_color:this._white,_white:!0,_baseCellOffset:null,_dotCanvas:null,__ready:function(){this.view.append("#dotCanvas","dotCanvas",{}),this._color=this._WHITE,this._baseCellOffset=this.$find("#dotCanvas > table > tbody > tr:nth-child(1) > td:nth-child(1)").offset();for(var a=[],b=this.$find("#dotCanvas table tr"),c=0,d=b.length;d>c;c++)for(var e=b.eq(c).children(),f=0,g=e.length;g>f;f++)"undefined"==typeof a[c]&&(a[c]=[]),a[c][f]=e.eq(f);this.log.debug(a),this._dotCanvas=a},".cell mousedown":function(a,b){this._mouseDown=!0,this._draw(b),this.log.debug(this._mouseDown)},".cell mousemove":function(a,b){a.event.preventDefault(),this._mouseDown&&this._draw(b),this.log.debug(this._mouseDown)},"{document} mousedown":function(a,b){this._mouseDown=!0,this.log.debug(this._mouseDown)},"{document} mouseup":function(a,b){this._mouseDown=!1,this.log.debug(this._mouseDown)},"#clear click":function(a,b){this.$find(".cell").removeClass("white")},".cell touchstart":function(a,b){this._mouseDown=!0;var c=a.event.originalEvent;this._origX=c.pageX,this._origY=c.pageY,this._draw(b)},".cell touchmove":function(a,b){a.event.preventDefault();var c=a.event.originalEvent,d=c.pageX,e=c.pageY;this.log.debug("x, y: "+d+", "+e,this.__name);var f={x:Math.round((d-this._baseCellOffset.left)/10),y:Math.round((e-this._baseCellOffset.top)/10)};this._draw(this._dotCanvas[f.y][f.x])},".cell touchend":function(a,b){this._mouseDown=!1},".button touchend":function(a,b){b.trigger("click")},"#toggleColor click":function(a,b){this._white?(b.text("ペンの色：黒"),this._white=!1):(b.text("ペンの色：白"),this._white=!0)},_draw:function(a){this._white?a.addClass("white"):a.removeClass("white")}};h5.core.controller("body",a)});